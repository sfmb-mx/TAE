<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<head>
<title>Unit 2 - Linear Regression</title>
<!-- 2015-06-12 Fri 07:46 -->
<meta  http-equiv="Content-Type" content="text/html;charset=utf-8" />
<meta  name="generator" content="Org-mode" />
<meta  name="author" content="Sergio-Feliciano Mendoza-Barrera" />
<meta  name="description" content="R introduction, remembering the syntax and some useful examples"
 />
<meta  name="keywords" content="R, data science, emacs, ESS, org-mode" />
<style type="text/css">
 <!--/*--><![CDATA[/*><!--*/
  .title  { text-align: center; }
  .todo   { font-family: monospace; color: red; }
  .done   { color: green; }
  .tag    { background-color: #eee; font-family: monospace;
            padding: 2px; font-size: 80%; font-weight: normal; }
  .timestamp { color: #bebebe; }
  .timestamp-kwd { color: #5f9ea0; }
  .right  { margin-left: auto; margin-right: 0px;  text-align: right; }
  .left   { margin-left: 0px;  margin-right: auto; text-align: left; }
  .center { margin-left: auto; margin-right: auto; text-align: center; }
  .underline { text-decoration: underline; }
  #postamble p, #preamble p { font-size: 90%; margin: .2em; }
  p.verse { margin-left: 3%; }
  pre {
    border: 1px solid #ccc;
    box-shadow: 3px 3px 3px #eee;
    padding: 8pt;
    font-family: monospace;
    overflow: auto;
    margin: 1.2em;
  }
  pre.src {
    position: relative;
    overflow: visible;
    padding-top: 1.2em;
  }
  pre.src:before {
    display: none;
    position: absolute;
    background-color: white;
    top: -10px;
    right: 10px;
    padding: 3px;
    border: 1px solid black;
  }
  pre.src:hover:before { display: inline;}
  pre.src-sh:before    { content: 'sh'; }
  pre.src-bash:before  { content: 'sh'; }
  pre.src-emacs-lisp:before { content: 'Emacs Lisp'; }
  pre.src-R:before     { content: 'R'; }
  pre.src-perl:before  { content: 'Perl'; }
  pre.src-java:before  { content: 'Java'; }
  pre.src-sql:before   { content: 'SQL'; }

  table { border-collapse:collapse; }
  caption.t-above { caption-side: top; }
  caption.t-bottom { caption-side: bottom; }
  td, th { vertical-align:top;  }
  th.right  { text-align: center;  }
  th.left   { text-align: center;   }
  th.center { text-align: center; }
  td.right  { text-align: right;  }
  td.left   { text-align: left;   }
  td.center { text-align: center; }
  dt { font-weight: bold; }
  .footpara:nth-child(2) { display: inline; }
  .footpara { display: block; }
  .footdef  { margin-bottom: 1em; }
  .figure { padding: 1em; }
  .figure p { text-align: center; }
  .inlinetask {
    padding: 10px;
    border: 2px solid gray;
    margin: 10px;
    background: #ffffcc;
  }
  #org-div-home-and-up
   { text-align: right; font-size: 70%; white-space: nowrap; }
  textarea { overflow-x: auto; }
  .linenr { font-size: smaller }
  .code-highlighted { background-color: #ffff00; }
  .org-info-js_info-navigation { border-style: none; }
  #org-info-js_console-label
    { font-size: 10px; font-weight: bold; white-space: nowrap; }
  .org-info-js_search-highlight
    { background-color: #ffff00; color: #000000; font-weight: bold; }
  /*]]>*/-->
</style>
<link rel="stylesheet" type="text/css" href="http://www.pirilampo.org/styles/readtheorg/css/htmlize.css"/>
<link rel="stylesheet" type="text/css" href="http://www.pirilampo.org/styles/readtheorg/css/readtheorg.css"/>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.4/js/bootstrap.min.js"></script>
<script type="text/javascript" src="http://www.pirilampo.org/styles/lib/js/jquery.stickytableheaders.js"></script>
<script type="text/javascript" src="http://www.pirilampo.org/styles/readtheorg/js/readtheorg.js"></script>
<script type="text/javascript">
/*
@licstart  The following is the entire license notice for the
JavaScript code in this tag.

Copyright (C) 2012-2013 Free Software Foundation, Inc.

The JavaScript code in this tag is free software: you can
redistribute it and/or modify it under the terms of the GNU
General Public License (GNU GPL) as published by the Free Software
Foundation, either version 3 of the License, or (at your option)
any later version.  The code is distributed WITHOUT ANY WARRANTY;
without even the implied warranty of MERCHANTABILITY or FITNESS
FOR A PARTICULAR PURPOSE.  See the GNU GPL for more details.

As additional permission under GNU GPL version 3 section 7, you
may distribute non-source (e.g., minimized or compacted) forms of
that code without the copy of the GNU GPL normally required by
section 4, provided you include this license notice and a URL
through which recipients can access the Corresponding Source.


@licend  The above is the entire license notice
for the JavaScript code in this tag.
*/
<!--/*--><![CDATA[/*><!--*/
 function CodeHighlightOn(elem, id)
 {
   var target = document.getElementById(id);
   if(null != target) {
     elem.cacheClassElem = elem.className;
     elem.cacheClassTarget = target.className;
     target.className = "code-highlighted";
     elem.className   = "code-highlighted";
   }
 }
 function CodeHighlightOff(elem, id)
 {
   var target = document.getElementById(id);
   if(elem.cacheClassElem)
     elem.className = elem.cacheClassElem;
   if(elem.cacheClassTarget)
     target.className = elem.cacheClassTarget;
 }
/*]]>*///-->
</script>
<script type="text/javascript" src="http://orgmode.org/mathjax/MathJax.js"></script>
<script type="text/javascript">
<!--/*--><![CDATA[/*><!--*/
    MathJax.Hub.Config({
        // Only one of the two following lines, depending on user settings
        // First allows browser-native MathML display, second forces HTML/CSS
        //  config: ["MMLorHTML.js"], jax: ["input/TeX"],
            jax: ["input/TeX", "output/HTML-CSS"],
        extensions: ["tex2jax.js","TeX/AMSmath.js","TeX/AMSsymbols.js",
                     "TeX/noUndefined.js"],
        tex2jax: {
            inlineMath: [ ["\\(","\\)"] ],
            displayMath: [ ['$$','$$'], ["\\[","\\]"], ["\\begin{displaymath}","\\end{displaymath}"] ],
            skipTags: ["script","noscript","style","textarea","pre","code"],
            ignoreClass: "tex2jax_ignore",
            processEscapes: false,
            processEnvironments: true,
            preview: "TeX"
        },
        showProcessingMessages: true,
        displayAlign: "center",
        displayIndent: "2em",

        "HTML-CSS": {
             scale: 100,
             availableFonts: ["STIX","TeX"],
             preferredFont: "TeX",
             webFont: "TeX",
             imageFont: "TeX",
             showMathMenu: true,
        },
        MMLorHTML: {
             prefer: {
                 MSIE:    "MML",
                 Firefox: "MML",
                 Opera:   "HTML",
                 other:   "HTML"
             }
        }
    });
/*]]>*///-->
</script>
</head>
<body>
<div id="content">
<h1 class="title">Unit 2 - Linear Regression</h1>
<div id="table-of-contents">
<h2>Table of Contents</h2>
<div id="text-table-of-contents">
<ul>
<li><a href="#sec-1">1. The Statistical Sommelier: An Introduction to Linear Regression</a>
<ul>
<li><a href="#sec-1-1">1.1. Quick Question (1 point possible)</a></li>
<li><a href="#sec-1-2">1.2. Quick Question (4 points possible)</a></li>
<li><a href="#sec-1-3">1.3. Quick Question (1/1 point)</a></li>
<li><a href="#sec-1-4">1.4. Video 4: Linear Regression in R</a></li>
<li><a href="#sec-1-5">1.5. Quick Question (3 points possible)</a></li>
<li><a href="#sec-1-6">1.6. Understanding the Model</a></li>
<li><a href="#sec-1-7">1.7. Quick Question (2 points possible)</a></li>
<li><a href="#sec-1-8">1.8. Video 6: Correlation and Multicollinearity</a></li>
<li><a href="#sec-1-9">1.9. Quick Question (1 point possible)</a></li>
<li><a href="#sec-1-10">1.10. Video 7: Making Predictions</a></li>
<li><a href="#sec-1-11">1.11. Quick Question (1 point possible)</a></li>
</ul>
</li>
</ul>
</div>
</div>
<div class="abstract">
<p>
Linear Regression topics. For the course "MITx: 15.071x The Analytics Edge".
</p>

</div>

<div id="outline-container-sec-1" class="outline-2">
<h2 id="sec-1"><span class="section-number-2">1</span> The Statistical Sommelier: An Introduction to Linear Regression</h2>
<div class="outline-text-2" id="text-1">
</div><div id="outline-container-sec-1-1" class="outline-3">
<h3 id="sec-1-1"><span class="section-number-3">1.1</span> Quick Question (1 point possible)</h3>
<div class="outline-text-3" id="text-1-1">
<p>
The plots below show the relationship between two of the independent
variables considered by Ashenfelter and the price of wine.
</p>


<div class="figure">
<p><img src="../graphs/Wine_QQ1_Plot1.png" alt="Wine_QQ1_Plot1.png" />
</p>
</div>


<div class="figure">
<p><img src="../graphs/Wine_QQ1_Plot2.png" alt="Wine_QQ1_Plot2.png" />
</p>
</div>

<p>
What is the correct relationship between harvest rain, average growing
season temperature, and wine prices?
</p>
</div>

<div id="outline-container-sec-1-1-1" class="outline-4">
<h4 id="sec-1-1-1"><span class="section-number-4">1.1.1</span> Answer</h4>
<div class="outline-text-4" id="text-1-1-1">
<p>
More harvest rain is associated with a lower price, and higher
temperatures is associated with a higher price
</p>
</div>

<div id="outline-container-sec-1-1-1-1" class="outline-5">
<h5 id="sec-1-1-1-1"><span class="section-number-5">1.1.1.1</span> Explanation</h5>
<div class="outline-text-5" id="text-1-1-1-1">
<p>
The plots show a positive trend between average growing season
temperature and the wine price. While the trend is less clear between
harvest rain and price, there is a slight negative association.
</p>
</div>
</div>
</div>
</div>

<div id="outline-container-sec-1-2" class="outline-3">
<h3 id="sec-1-2"><span class="section-number-3">1.2</span> Quick Question (4 points possible)</h3>
<div class="outline-text-3" id="text-1-2">
<p>
The following figure shows three data points and the best fit line
</p>

<p>
y = 3x + 2.
</p>

<p>
The x-coordinate, or "x", is our independent variable and the
y-coordinate, or "y", is our dependent variable.
</p>


<div class="figure">
<p><img src="../graphs/Wine_QQ2.png" alt="Wine_QQ2.png" />
</p>
</div>

<p>
Please answer the following questions using this figure.
</p>

<div class="org-src-container">

<pre class="src src-R">x <span style="color: #db7093;">&lt;-</span> c(1, 0, 1); y <span style="color: #db7093;">&lt;-</span> c(8, 2, 2); beta0 <span style="color: #db7093;">&lt;-</span> rep(mean(y), 3)
yHat <span style="color: #db7093;">&lt;-</span> (3 * x) + 2

eSqModel <span style="color: #db7093;">&lt;-</span> (y - yHat)^2
eSqBL <span style="color: #db7093;">&lt;-</span> (y - beta0)^2
data <span style="color: #db7093;">&lt;-</span> data.frame(x, y, yHat, eSqModel, eSqBL)

writeLines(<span style="color: #fffacd;">"\n    The baseline prediction"</span>)
beta0[1]

writeLines(<span style="color: #fffacd;">"\n    The SSE for the model yHat"</span>)
sum(data$eSqModel)

writeLines(<span style="color: #fffacd;">"\n    The SSE for the Baseline"</span>)
sum(data$eSqBL)

writeLines(<span style="color: #fffacd;">"\n    The R^2 of the model"</span>)
1 - (sum(data$eSqModel) / sum(data$eSqBL))
</pre>
</div>

<pre class="example">
    The baseline prediction
[1] 4

    The SSE for the model yHat
[1] 18

    The SSE for the Baseline
[1] 24

    The R^2 of the model
[1] 0.25
</pre>
</div>

<div id="outline-container-sec-1-2-1" class="outline-4">
<h4 id="sec-1-2-1"><span class="section-number-4">1.2.1</span> Question a</h4>
<div class="outline-text-4" id="text-1-2-1">
<p>
What is the baseline prediction?
</p>
</div>

<div id="outline-container-sec-1-2-1-1" class="outline-5">
<h5 id="sec-1-2-1-1"><span class="section-number-5">1.2.1.1</span> Answer</h5>
<div class="outline-text-5" id="text-1-2-1-1">
<p>
The baseline prediction is the average value of the dependent
variable. Since our dependent variable takes values 2, 2, and 8 in our
data set, the average is (2+2+8)/3 = 4.
</p>
</div>
</div>
</div>

<div id="outline-container-sec-1-2-2" class="outline-4">
<h4 id="sec-1-2-2"><span class="section-number-4">1.2.2</span> Question b</h4>
<div class="outline-text-4" id="text-1-2-2">
<p>
What is the Sum of Squared Errors (SSE)?
</p>
</div>

<div id="outline-container-sec-1-2-2-1" class="outline-5">
<h5 id="sec-1-2-2-1"><span class="section-number-5">1.2.2.1</span> Answer</h5>
<div class="outline-text-5" id="text-1-2-2-1">
<p>
The SSE is computed by summing the squared errors between the actual
values and our predictions. For each value of the independent variable
(x), our best fit line makes the following predictions:
</p>

<p>
If x = 0, y = 3(0) + 2 = 2,
</p>

<p>
If x = 1, y = 3(1) + 2 = 5.
</p>

<p>
Thus we make an error of 0 for the data point (0,2), an error of 3 for
the data point (1,2), and an error of 3 for the data point (1,8). So
we have
</p>

<p>
SSE = 0² + 3² + 3² = 18.
</p>
</div>
</div>
</div>

<div id="outline-container-sec-1-2-3" class="outline-4">
<h4 id="sec-1-2-3"><span class="section-number-4">1.2.3</span> Question c</h4>
<div class="outline-text-4" id="text-1-2-3">
<p>
What is the Total Sum of Squares (SST)?
</p>
</div>

<div id="outline-container-sec-1-2-3-1" class="outline-5">
<h5 id="sec-1-2-3-1"><span class="section-number-5">1.2.3.1</span> Answer</h5>
<div class="outline-text-5" id="text-1-2-3-1">
<p>
The SST is computed by summing the squared errors between the actual
values and the baseline prediction. From the first question, we
computed the baseline prediction to be 4. Thus the SST is:
</p>

<p>
SST = (2 - 4)² + (2 - 4)² + (8 - 4)² = 24.
</p>
</div>
</div>
</div>

<div id="outline-container-sec-1-2-4" class="outline-4">
<h4 id="sec-1-2-4"><span class="section-number-4">1.2.4</span> Question d</h4>
<div class="outline-text-4" id="text-1-2-4">
<p>
What is the R² of the model?
</p>
</div>

<div id="outline-container-sec-1-2-4-1" class="outline-5">
<h5 id="sec-1-2-4-1"><span class="section-number-5">1.2.4.1</span> Answer</h5>
<div class="outline-text-5" id="text-1-2-4-1">
<p>
The R² formula is:
</p>

<p>
R² = 1 - SSE/SST
</p>

<p>
Thus using our answers to the previous questions, we have that
</p>

<p>
R² = 1 - 18/24 = 0.25.
</p>
</div>
</div>
</div>
</div>

<div id="outline-container-sec-1-3" class="outline-3">
<h3 id="sec-1-3"><span class="section-number-3">1.3</span> Quick Question (1/1 point)</h3>
<div class="outline-text-3" id="text-1-3">
<p>
Suppose we add another variable, Average Winter Temperature, to our
model to predict wine price. Is it possible for the model's R² value
to go down from 0.83 to 0.80?
</p>
</div>

<div id="outline-container-sec-1-3-1" class="outline-4">
<h4 id="sec-1-3-1"><span class="section-number-4">1.3.1</span> Answer</h4>
<div class="outline-text-4" id="text-1-3-1">
<p>
The model's R² value can never decrease from adding new variables to
the model. This is due to the fact that it is always possible to set
the coefficient for the new variable to zero in the new
model. However, this would be the same as the old model. So the only
reason to make the coefficient non-zero is if it improves the R² value
of the model, since linear regression picks the coefficients to
minimize the error terms, which is the same as maximizing the R².
</p>
</div>
</div>
</div>

<div id="outline-container-sec-1-4" class="outline-3">
<h3 id="sec-1-4"><span class="section-number-3">1.4</span> Video 4: Linear Regression in R</h3>
<div class="outline-text-3" id="text-1-4">
<p>
Before starting this video, please download the datasets wine.csv and
wine_test.csv. Save them to a folder on your computer that you will
remember, and in R, navigate to this folder (File-&gt;Change dir&#x2026; on a
PC, and Misc-&gt;Change Working Directory on a Mac). This data comes from
Liquid Assets.
</p>

<p>
A script file containing all of the R commands used in this lecture
can be downloaded here.
</p>
</div>

<div id="outline-container-sec-1-4-1" class="outline-4">
<h4 id="sec-1-4-1"><span class="section-number-4">1.4.1</span> Download the data sets</h4>
<div class="outline-text-4" id="text-1-4-1">
<p>
In this part we can download the data
</p>

<div class="org-src-container">

<pre class="src src-R"><span style="color: #db7093;">library</span>(parallel)

<span style="color: #4682b4;">if</span>(!file.exists(<span style="color: #fffacd;">"../data"</span>)) {
        dir.create(<span style="color: #fffacd;">"../data"</span>)
}

fileUrl <span style="color: #db7093;">&lt;-</span>
        c(<span style="color: #fffacd;">"https://courses.edx.org/asset-v1:MITx+15.071x_2a+2T2015+type@asset+block/wine.csv"</span>, <span style="color: #fffacd;">"https://courses.edx.org/asset-v1:MITx+15.071x_2a+2T2015+type@asset+block/wine_test.csv"</span>)

fileName <span style="color: #db7093;">&lt;-</span> c(<span style="color: #fffacd;">"wine.csv"</span>, <span style="color: #fffacd;">"wine_test.csv"</span>)

dataPath <span style="color: #db7093;">&lt;-</span> <span style="color: #fffacd;">"../data"</span>

<span style="color: #4682b4;">for</span>(i <span style="color: #4682b4;">in</span> 1:2) {
        filePath <span style="color: #db7093;">&lt;-</span> paste(dataPath, fileName[i], sep = <span style="color: #fffacd;">"/"</span>)

        <span style="color: #4682b4;">if</span>(!file.exists(filePath)) {
                download.file(fileUrl[i], destfile = filePath, method = <span style="color: #fffacd;">"curl"</span>)
        }
}
list.files(<span style="color: #fffacd;">"../data"</span>)
</pre>
</div>

<pre class="example">
 [1] "AnonymityPoll.csv"      "BoeingStock.csv"        "CPSData.csv"
 [4] "CocaColaStock.csv"      "CountryCodes.csv"       "GEStock.csv"
 [7] "IBMStock.csv"           "MetroAreaCodes.csv"     "ProcterGambleStock.csv"
[10] "README.md"              "USDA.csv"               "WHO.csv"
[13] "WHO_Europe.csv"         "mvtWeek1.csv"           "wine.csv"
[16] "wine_test.csv"
</pre>
</div>
</div>

<div id="outline-container-sec-1-4-2" class="outline-4">
<h4 id="sec-1-4-2"><span class="section-number-4">1.4.2</span> Load the wine data set</h4>
<div class="outline-text-4" id="text-1-4-2">
<div class="org-src-container">

<pre class="src src-R">writeLines(<span style="color: #fffacd;">"    Loading data into their data frames."</span>)
wine <span style="color: #db7093;">&lt;-</span> read.table(<span style="color: #fffacd;">"../data/wine.csv"</span>, sep = <span style="color: #fffacd;">","</span>, header = <span style="color: #3cb371;">TRUE</span>)

str(wine)
summary(wine)
</pre>
</div>

<pre class="example">
    Loading data into their data frames.
'data.frame':	25 obs. of  7 variables:
 $ Year       : int  1952 1953 1955 1957 1958 1959 1960 1961 1962 1963 ...
 $ Price      : num  7.5 8.04 7.69 6.98 6.78 ...
 $ WinterRain : int  600 690 502 420 582 485 763 830 697 608 ...
 $ AGST       : num  17.1 16.7 17.1 16.1 16.4 ...
 $ HarvestRain: int  160 80 130 110 187 187 290 38 52 155 ...
 $ Age        : int  31 30 28 26 25 24 23 22 21 20 ...
 $ FrancePop  : num  43184 43495 44218 45152 45654 ...
      Year          Price         WinterRain         AGST        HarvestRain
 Min.   :1952   Min.   :6.205   Min.   :376.0   Min.   :14.98   Min.   : 38.0
 1st Qu.:1960   1st Qu.:6.519   1st Qu.:536.0   1st Qu.:16.20   1st Qu.: 89.0
 Median :1966   Median :7.121   Median :600.0   Median :16.53   Median :130.0
 Mean   :1966   Mean   :7.067   Mean   :605.3   Mean   :16.51   Mean   :148.6
 3rd Qu.:1972   3rd Qu.:7.495   3rd Qu.:697.0   3rd Qu.:17.07   3rd Qu.:187.0
 Max.   :1978   Max.   :8.494   Max.   :830.0   Max.   :17.65   Max.   :292.0
      Age         FrancePop
 Min.   : 5.0   Min.   :43184
 1st Qu.:11.0   1st Qu.:46584
 Median :17.0   Median :50255
 Mean   :17.2   Mean   :49694
 3rd Qu.:23.0   3rd Qu.:52894
 Max.   :31.0   Max.   :54602
</pre>
</div>
</div>

<div id="outline-container-sec-1-4-3" class="outline-4">
<h4 id="sec-1-4-3"><span class="section-number-4">1.4.3</span> Building the models</h4>
<div class="outline-text-4" id="text-1-4-3">
<p>
Lets begin with a model with only one variable:
</p>
</div>

<div id="outline-container-sec-1-4-3-1" class="outline-5">
<h5 id="sec-1-4-3-1"><span class="section-number-5">1.4.3.1</span> One variable model</h5>
<div class="outline-text-5" id="text-1-4-3-1">
<div class="org-src-container">

<pre class="src src-R">writeLines(<span style="color: #fffacd;">"\n :: Linear Regression (one variable)"</span>)
model1 <span style="color: #db7093;">&lt;-</span> lm(Price ~ AGST, data = wine)
summary(model1)

writeLines(<span style="color: #fffacd;">"\n :: Sum of Squared Errors:"</span>)
model1$residuals

writeLines(<span style="color: #fffacd;">"\n :: Calculating SSE:"</span>)
SSE = sum(model1$residuals^2)
SSE
</pre>
</div>

<pre class="example">
 :: Linear Regression (one variable)

Call:
lm(formula = Price ~ AGST, data = wine)

Residuals:
     Min       1Q   Median       3Q      Max
-0.78450 -0.23882 -0.03727  0.38992  0.90318

Coefficients:
            Estimate Std. Error t value Pr(&gt;|t|)
(Intercept)  -3.4178     2.4935  -1.371 0.183710
AGST          0.6351     0.1509   4.208 0.000335 ***
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1

Residual standard error: 0.4993 on 23 degrees of freedom
Multiple R-squared:  0.435,	Adjusted R-squared:  0.4105
F-statistic: 17.71 on 1 and 23 DF,  p-value: 0.000335

 :: Sum of Squared Errors:
          1           2           3           4           5           6
 0.04204258  0.82983774  0.21169394  0.15609432 -0.23119140  0.38991701
          7           8           9          10          11          12
-0.48959140  0.90318115  0.45372410  0.14887461 -0.23882157 -0.08974238
         13          14          15          16          17          18
 0.66185660 -0.05211511 -0.62726647 -0.74714947  0.42113502 -0.03727441
         19          20          21          22          23          24
 0.10685278 -0.78450270 -0.64017590 -0.05508720 -0.67055321 -0.22040381
         25
 0.55866518

 :: Calculating SSE:
[1] 5.734875
</pre>

<p>
Beside it is a number labeled Adjusted R-squared. In this case, it's
0.41. This number adjusts the R-squared value to account for the
number of independent variables used relative to the number of data
points. Multiple R-squared will always increase if you add more
independent variables.
</p>

<p>
But Adjusted R-squared will decrease if you add an independent
variable that doesn't help the model. This is a good way to determine
if an additional variable should even be included in the model.
</p>

<p>
We can compute the Sum of <b>Squared Errors</b>, or <b>SSE</b>, by taking the
<b>sum(model1$residuals^2)</b>. If we type SSE and hit Enter, we can see
that our sum of squared errors is 5.73.
</p>
</div>
</div>

<div id="outline-container-sec-1-4-3-2" class="outline-5">
<h5 id="sec-1-4-3-2"><span class="section-number-5">1.4.3.2</span> Model with two variables</h5>
<div class="outline-text-5" id="text-1-4-3-2">
<div class="org-src-container">

<pre class="src src-R">writeLines(<span style="color: #fffacd;">"\n :: Linear Regression (two variables)"</span>)
model2 = lm(Price ~ AGST + HarvestRain, data=wine)
summary(model2)

writeLines(<span style="color: #fffacd;">"\n :: Sum of Squared Errors"</span>)
SSE = sum(model2$residuals^2)

writeLines(<span style="color: #fffacd;">"\n :: Calculating the SSE"</span>)
SSE
</pre>
</div>

<pre class="example">
 :: Linear Regression (two variables)

Call:
lm(formula = Price ~ AGST + HarvestRain, data = wine)

Residuals:
     Min       1Q   Median       3Q      Max
-0.88321 -0.19600  0.06178  0.15379  0.59722

Coefficients:
            Estimate Std. Error t value Pr(&gt;|t|)
(Intercept) -2.20265    1.85443  -1.188 0.247585
AGST         0.60262    0.11128   5.415 1.94e-05 ***
HarvestRain -0.00457    0.00101  -4.525 0.000167 ***
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1

Residual standard error: 0.3674 on 22 degrees of freedom
Multiple R-squared:  0.7074,	Adjusted R-squared:  0.6808
F-statistic: 26.59 on 2 and 22 DF,  p-value: 1.347e-06

 :: Sum of Squared Errors

 :: Calculating the SSE
[1] 2.970373
</pre>

<p>
And if you look at the R-squared near the bottom of the output, you
can see that this variable really helped our model.
</p>

<p>
Our Multiple R-squared and Adjusted R-squared both increased
significantly compared to the previous model.
</p>

<p>
If we type SSE, we can see that the sum of squared errors for model2
is 2.97, which is much better (less) than the sum of squared errors
for model1.
</p>
</div>
</div>

<div id="outline-container-sec-1-4-3-3" class="outline-5">
<h5 id="sec-1-4-3-3"><span class="section-number-5">1.4.3.3</span> Model with all variables</h5>
<div class="outline-text-5" id="text-1-4-3-3">
<div class="org-src-container">

<pre class="src src-R">writeLines(<span style="color: #fffacd;">"\n :: Linear Regression (all variables)"</span>)
model3 <span style="color: #db7093;">&lt;-</span> lm(Price ~ AGST + HarvestRain + WinterRain + Age + FrancePop, data=wine)
summary(model3)

writeLines(<span style="color: #fffacd;">"\n :: Sum of Squared Errors"</span>)
SSE <span style="color: #db7093;">&lt;-</span> sum(model3$residuals^2)

writeLines(<span style="color: #fffacd;">"\n :: Calculating the SSE for all variable model"</span>)
SSE
</pre>
</div>

<pre class="example">
 :: Linear Regression (all variables)

Call:
lm(formula = Price ~ AGST + HarvestRain + WinterRain + Age +
    FrancePop, data = wine)

Residuals:
     Min       1Q   Median       3Q      Max
-0.48179 -0.24662 -0.00726  0.22012  0.51987

Coefficients:
              Estimate Std. Error t value Pr(&gt;|t|)
(Intercept) -4.504e-01  1.019e+01  -0.044 0.965202
AGST         6.012e-01  1.030e-01   5.836 1.27e-05 ***
HarvestRain -3.958e-03  8.751e-04  -4.523 0.000233 ***
WinterRain   1.043e-03  5.310e-04   1.963 0.064416 .
Age          5.847e-04  7.900e-02   0.007 0.994172
FrancePop   -4.953e-05  1.667e-04  -0.297 0.769578
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1

Residual standard error: 0.3019 on 19 degrees of freedom
Multiple R-squared:  0.8294,	Adjusted R-squared:  0.7845
F-statistic: 18.47 on 5 and 19 DF,  p-value: 1.044e-06

 :: Sum of Squared Errors

 :: Calculating the SSE for all variable model
[1] 1.732113
</pre>

<p>
we can again see that the Multiple R-squared and Adjusted R-squared
have both increased.
</p>

<p>
Let's now compute the sum of squared errors for this new model. SSE
equals the sum(model3$residuals^2).
</p>

<p>
And if we type SSE, we can see that the sum of squared errors for
model3 is 1.7, even better than before.
</p>

<p>
Another way to build the model using all variables can be written as:
</p>

<div class="org-src-container">

<pre class="src src-R">writeLines(<span style="color: #fffacd;">"\n :: Linear Regression (all variables)"</span>)
model3 <span style="color: #db7093;">&lt;-</span> lm(Price ~ ., data=wine)
summary(model3)

writeLines(<span style="color: #fffacd;">"\n :: Sum of Squared Errors"</span>)
SSE <span style="color: #db7093;">&lt;-</span> sum(model3$residuals^2)

writeLines(<span style="color: #fffacd;">"\n :: Calculating the SSE for all variable model"</span>)
SSE
</pre>
</div>

<pre class="example">
 :: Linear Regression (all variables)

Call:
lm(formula = Price ~ ., data = wine)

Residuals:
     Min       1Q   Median       3Q      Max
-0.48179 -0.24662 -0.00726  0.22012  0.51987

Coefficients: (1 not defined because of singularities)
              Estimate Std. Error t value Pr(&gt;|t|)
(Intercept)  7.092e-01  1.467e+02   0.005 0.996194
Year        -5.847e-04  7.900e-02  -0.007 0.994172
WinterRain   1.043e-03  5.310e-04   1.963 0.064416 .
AGST         6.012e-01  1.030e-01   5.836 1.27e-05 ***
HarvestRain -3.958e-03  8.751e-04  -4.523 0.000233 ***
Age                 NA         NA      NA       NA
FrancePop   -4.953e-05  1.667e-04  -0.297 0.769578
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1

Residual standard error: 0.3019 on 19 degrees of freedom
Multiple R-squared:  0.8294,	Adjusted R-squared:  0.7845
F-statistic: 18.47 on 5 and 19 DF,  p-value: 1.044e-06

 :: Sum of Squared Errors

 :: Calculating the SSE for all variable model
[1] 1.732113
</pre>

<p>
Using <b>model3 &lt;- lm(Price ~ ., data=wine)</b> with a dot (.) indicate to
use all variables.
</p>
</div>
</div>
</div>
</div>

<div id="outline-container-sec-1-5" class="outline-3">
<h3 id="sec-1-5"><span class="section-number-3">1.5</span> Quick Question (3 points possible)</h3>
<div class="outline-text-3" id="text-1-5">
<p>
In R, use the dataset wine.csv to create a linear regression model to
predict Price using HarvestRain and WinterRain as independent
variables.
</p>

<div class="org-src-container">

<pre class="src src-R">writeLines(<span style="color: #fffacd;">"\n :: Linear Regression (HarvestRain and WinterRain variables)"</span>)
modelQQ3 <span style="color: #db7093;">&lt;-</span> lm(Price ~ HarvestRain + WinterRain, data=wine)
summary(modelQQ3)

writeLines(<span style="color: #fffacd;">"\n :: Sum of Squared Errors"</span>)
SSE <span style="color: #db7093;">&lt;-</span> sum(modelQQ3$residuals^2)

writeLines(<span style="color: #fffacd;">"\n :: Calculating the SSE for all variable model"</span>)
SSE
</pre>
</div>

<pre class="example">
 :: Linear Regression (HarvestRain and WinterRain variables)

Call:
lm(formula = Price ~ HarvestRain + WinterRain, data = wine)

Residuals:
    Min      1Q  Median      3Q     Max
-1.0933 -0.3222 -0.1012  0.3871  1.1877

Coefficients:
              Estimate Std. Error t value Pr(&gt;|t|)
(Intercept)  7.865e+00  6.616e-01  11.888 4.76e-11 ***
HarvestRain -4.971e-03  1.601e-03  -3.105  0.00516 **
WinterRain  -9.848e-05  9.007e-04  -0.109  0.91392
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1

Residual standard error: 0.5611 on 22 degrees of freedom
Multiple R-squared:  0.3177,	Adjusted R-squared:  0.2557
F-statistic: 5.122 on 2 and 22 DF,  p-value: 0.01492

 :: Sum of Squared Errors

 :: Calculating the SSE for all variable model
[1] 6.925756
</pre>

<p>
Using the summary output of this model, answer the following
questions:
</p>

<p>
What is the "Multiple R-squared" value of your model?
</p>
</div>

<div id="outline-container-sec-1-5-1" class="outline-4">
<h4 id="sec-1-5-1"><span class="section-number-4">1.5.1</span> Answer</h4>
<div class="outline-text-4" id="text-1-5-1">
<p>
In R, create the model by typing the following line into your R
console:
</p>

<p>
modelQQ4 = lm(Price ~ HarvestRain + WinterRain, data=wine)
</p>

<p>
Then, look at the output of summary(modelQQ4). The Multiple R-squared
is listed at the bottom of the output, and the coefficients can be
found in the coefficients table.
</p>
</div>
</div>
</div>

<div id="outline-container-sec-1-6" class="outline-3">
<h3 id="sec-1-6"><span class="section-number-3">1.6</span> Understanding the Model</h3>
<div class="outline-text-3" id="text-1-6">
<p>
In the summary of the models we can see some other columns, the model
coefficients and other columns.
</p>

<p>
The remaining columns help us to determine if a variable should be
included in the model, or if its coefficient is significantly
different from 0.
</p>

<p>
A coefficient of 0 means that the value of the independent variable
does not change our prediction for the dependent variable.
</p>

<p>
If a coefficient is not significantly different from 0, then we should
probably remove the variable from our model since it's not helping to
predict the dependent variable.
</p>

<p>
The standard error column gives a measure of how much the coefficient
is likely to vary from the estimate value.
</p>

<p>
The t value is the estimate divided by the standard error. It will be
negative if the estimate is negative and positive if the estimate is
positive. The larger the absolute value of the t value, the more
likely the coefficient is to be significant.
</p>

<p>
<b>So we want independent variables with a large absolute value in this
 column</b>.
</p>

<p>
The <b>last column of numbers</b> gives a measure of how plausible it is
that the coefficient is actually 0, given the data we used to build
the model.
</p>

<p>
The less plausible it is, or the smaller the probability number in
this column, the less likely it is that our coefficient estimate is
actually 0.
</p>

<p>
This number will be large if the absolute value of the t value is
small, and it will be small if the absolute value of the t value is
large. <b>We want independent variables with small values in this
column</b>.
</p>

<p>
This is a lot of information, but the easiest way in R to determine if
a variable is significant is to look at the stars at the end of each
row.
</p>

<p>
The <b>star coding scheme</b> is explained at the bottom of the
Coefficients table.
</p>

<p>
<b>Three stars is the highest level of significance</b> and corresponds to a
probability value less than 0.001, or the smallest possible
probabilities.
</p>

<p>
<b>Two stars is also very significant</b> and corresponds to a probability
between 0.001 and 0.01.
</p>

<p>
<b>One star is still significant</b> and corresponds to a probability between
0.01 and 0.05.
</p>

<p>
<b>A period</b>, or <b>dot</b>, means that the coefficient is almost significant
 and corresponds to a probability between 0.05 and 0.10.
</p>

<p>
When we ask you to list the significant variables in a problem, we
will usually not include these. Nothing at the end of a row means that
the variable is not significant in the model.
</p>
</div>

<div id="outline-container-sec-1-6-1" class="outline-4">
<h4 id="sec-1-6-1"><span class="section-number-4">1.6.1</span> Removing non-significant variables from our model</h4>
<div class="outline-text-4" id="text-1-6-1">
<div class="org-src-container">

<pre class="src src-R">writeLines(<span style="color: #fffacd;">"\n :: Remove FrancePop"</span>)
model4 <span style="color: #db7093;">&lt;-</span> lm(Price ~ AGST + HarvestRain + WinterRain + Age, data = wine)
summary(model4)
</pre>
</div>

<pre class="example">
 :: Remove FrancePop

Call:
lm(formula = Price ~ AGST + HarvestRain + WinterRain + Age, data = wine)

Residuals:
     Min       1Q   Median       3Q      Max
-0.45470 -0.24273  0.00752  0.19773  0.53637

Coefficients:
              Estimate Std. Error t value Pr(&gt;|t|)
(Intercept) -3.4299802  1.7658975  -1.942 0.066311 .
AGST         0.6072093  0.0987022   6.152  5.2e-06 ***
HarvestRain -0.0039715  0.0008538  -4.652 0.000154 ***
WinterRain   0.0010755  0.0005073   2.120 0.046694 *
Age          0.0239308  0.0080969   2.956 0.007819 **
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1

Residual standard error: 0.295 on 20 degrees of freedom
Multiple R-squared:  0.8286,	Adjusted R-squared:  0.7943
F-statistic: 24.17 on 4 and 20 DF,  p-value: 2.036e-07
</pre>

<p>
We can see that the <b>R-squared</b>, for this model, is <b>0.8286</b> and our
Adjusted R-squared is <b>0.79</b>.
</p>

<p>
If we scroll back up in our R Console, we can see that for model3, the
R-squared was <b>0.8294</b>, and the Adjusted R-squared was <b>0.7845</b>.
</p>

<p>
So this model is just as strong, if not stronger, than the previous
model because our Adjusted R-squared actually increased by removing
<b>FrancePopulation</b>.
</p>
</div>
</div>
</div>

<div id="outline-container-sec-1-7" class="outline-3">
<h3 id="sec-1-7"><span class="section-number-3">1.7</span> Quick Question (2 points possible)</h3>
<div class="outline-text-3" id="text-1-7">
<p>
Use the dataset wine.csv to create a linear regression model to
predict Price using HarvestRain and WinterRain as independent
variables, like you did in the previous quick question.
</p>

<div class="org-src-container">

<pre class="src src-R">writeLines(<span style="color: #fffacd;">"\n :: Linear Regression (HarvestRain and WinterRain variables)"</span>)
modelQQ3 <span style="color: #db7093;">&lt;-</span> lm(Price ~ HarvestRain + WinterRain, data=wine)
summary(modelQQ3)

writeLines(<span style="color: #fffacd;">"\n :: Sum of Squared Errors"</span>)
SSE <span style="color: #db7093;">&lt;-</span> sum(modelQQ3$residuals^2)

writeLines(<span style="color: #fffacd;">"\n :: Calculating the SSE for all variable model"</span>)
SSE
</pre>
</div>

<pre class="example">
 :: Linear Regression (HarvestRain and WinterRain variables)

Call:
lm(formula = Price ~ HarvestRain + WinterRain, data = wine)

Residuals:
    Min      1Q  Median      3Q     Max
-1.0933 -0.3222 -0.1012  0.3871  1.1877

Coefficients:
              Estimate Std. Error t value Pr(&gt;|t|)
(Intercept)  7.865e+00  6.616e-01  11.888 4.76e-11 ***
HarvestRain -4.971e-03  1.601e-03  -3.105  0.00516 **
WinterRain  -9.848e-05  9.007e-04  -0.109  0.91392
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1

Residual standard error: 0.5611 on 22 degrees of freedom
Multiple R-squared:  0.3177,	Adjusted R-squared:  0.2557
F-statistic: 5.122 on 2 and 22 DF,  p-value: 0.01492

 :: Sum of Squared Errors

 :: Calculating the SSE for all variable model
[1] 6.925756
</pre>

<p>
Using the summary output of this model, answer the following
questions:
</p>
</div>

<div id="outline-container-sec-1-7-1" class="outline-4">
<h4 id="sec-1-7-1"><span class="section-number-4">1.7.1</span> Question a</h4>
<div class="outline-text-4" id="text-1-7-1">
<p>
Is the coefficient for HarvestRain significant?
</p>
</div>

<div id="outline-container-sec-1-7-1-1" class="outline-5">
<h5 id="sec-1-7-1-1"><span class="section-number-5">1.7.1.1</span> Answer</h5>
<div class="outline-text-5" id="text-1-7-1-1">
<p>
Yes.
</p>
</div>
</div>
</div>

<div id="outline-container-sec-1-7-2" class="outline-4">
<h4 id="sec-1-7-2"><span class="section-number-4">1.7.2</span> Question b</h4>
<div class="outline-text-4" id="text-1-7-2">
<p>
Is the coefficient for WinterRain significant?
</p>
</div>

<div id="outline-container-sec-1-7-2-1" class="outline-5">
<h5 id="sec-1-7-2-1"><span class="section-number-5">1.7.2.1</span> Answer</h5>
<div class="outline-text-5" id="text-1-7-2-1">
<p>
No.
</p>

<p>
<b>From the summary output, you can see that HarvestRain is significant
 (two stars), but WinterRain is not (no stars)</b>.
</p>
</div>
</div>
</div>
</div>

<div id="outline-container-sec-1-8" class="outline-3">
<h3 id="sec-1-8"><span class="section-number-3">1.8</span> Video 6: Correlation and Multicollinearity</h3>
<div class="outline-text-3" id="text-1-8">
<p>
We observed that <b>Age</b> and <b>FrancePopulation</b> are highly
correlated. But what is correlation?
</p>

<p>
<b>Correlation</b> measures the linear relationship between two variables
and is a number between -1 and +1. A correlation of +1 means a perfect
positive linear relationship. A correlation of -1 means a perfect
negative linear relationship.
</p>

<p>
In the middle of these two extremes is a <b>correlation of 0</b>, which means
that there is no linear relationship between the two variables.
</p>

<div class="org-src-container">

<pre class="src src-R">writeLines(<span style="color: #fffacd;">"\n :: Correlations"</span>)
cor(wine$WinterRain, wine$Price)
cor(wine$Age, wine$FrancePop)
cor(wine)
</pre>
</div>

<pre class="example">
 :: Correlations
[1] 0.1366505
[1] -0.9944851
                   Year      Price   WinterRain        AGST HarvestRain
Year         1.00000000 -0.4477679  0.016970024 -0.24691585  0.02800907
Price       -0.44776786  1.0000000  0.136650547  0.65956286 -0.56332190
WinterRain   0.01697002  0.1366505  1.000000000 -0.32109061 -0.27544085
AGST        -0.24691585  0.6595629 -0.321090611  1.00000000 -0.06449593
HarvestRain  0.02800907 -0.5633219 -0.275440854 -0.06449593  1.00000000
Age         -1.00000000  0.4477679 -0.016970024  0.24691585 -0.02800907
FrancePop    0.99448510 -0.4668616 -0.001621627 -0.25916227  0.04126439
                    Age    FrancePop
Year        -1.00000000  0.994485097
Price        0.44776786 -0.466861641
WinterRain  -0.01697002 -0.001621627
AGST         0.24691585 -0.259162274
HarvestRain -0.02800907  0.041264394
Age          1.00000000 -0.994485097
FrancePop   -0.99448510  1.000000000
</pre>

<p>
From these results we can see a high correlation between <b>Age</b> and
<b>FrancePop</b> independent variables.
</p>

<div class="org-src-container">

<pre class="src src-R">writeLines(<span style="color: #fffacd;">"\n :: Remove Age and FrancePop"</span>)
model5 <span style="color: #db7093;">&lt;-</span> lm(Price ~ AGST + HarvestRain + WinterRain, data=wine)
summary(model5)
</pre>
</div>

<pre class="example">
 :: Remove Age and FrancePop

Call:
lm(formula = Price ~ AGST + HarvestRain + WinterRain, data = wine)

Residuals:
     Min       1Q   Median       3Q      Max
-0.67472 -0.12958  0.01973  0.20751  0.63846

Coefficients:
              Estimate Std. Error t value Pr(&gt;|t|)
(Intercept) -4.3016263  2.0366743  -2.112 0.046831 *
AGST         0.6810242  0.1117011   6.097 4.75e-06 ***
HarvestRain -0.0039481  0.0009987  -3.953 0.000726 ***
WinterRain   0.0011765  0.0005920   1.987 0.060097 .
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1

Residual standard error: 0.345 on 21 degrees of freedom
Multiple R-squared:  0.7537,	Adjusted R-squared:  0.7185
F-statistic: 21.42 on 3 and 21 DF,  p-value: 1.359e-06
</pre>

<p>
There is no definitive cut-off value for what makes a correlation too
high. But typically, a correlation greater than 0.7 or less than -0.7
is cause for concern.
</p>

<p>
If you look back at all of the correlations we computed for our data
set, you can see that it doesn't look like we have any other
highly-correlated independent variables.
</p>
</div>
</div>

<div id="outline-container-sec-1-9" class="outline-3">
<h3 id="sec-1-9"><span class="section-number-3">1.9</span> Quick Question (1 point possible)</h3>
<div class="outline-text-3" id="text-1-9">
<p>
Using the data set wine.csv, what is the correlation between
HarvestRain and WinterRain?
</p>

<div class="org-src-container">

<pre class="src src-R">writeLines(<span style="color: #fffacd;">"\n :: Correlations"</span>)
cor(wine$HarvestRain ,wine$WinterRain)
</pre>
</div>

<pre class="example">
 :: Correlations
[1] -0.2754409
</pre>
</div>
</div>

<div id="outline-container-sec-1-10" class="outline-3">
<h3 id="sec-1-10"><span class="section-number-3">1.10</span> Video 7: Making Predictions</h3>
<div class="outline-text-3" id="text-1-10">
<p>
Our wine model had an R-squared value of 0.83, which tells us how
accurate our model is on the data we used to construct the model.
</p>

<p>
So we know our model does a good job predicting the data it's seen.
For this particular application, Bordeaux wine buyers profit from
being able to predict the quality of a wine years before it matures.
</p>

<div class="org-src-container">

<pre class="src src-R">writeLines(<span style="color: #fffacd;">"    Loading the wine test set into their data frame."</span>)
wineTest <span style="color: #db7093;">&lt;-</span> read.table(<span style="color: #fffacd;">"../data/wine_test.csv"</span>, sep = <span style="color: #fffacd;">","</span>, header =
        <span style="color: #3cb371;">TRUE</span>)
str(wineTest)
</pre>
</div>

<pre class="example">
    Loading the wine test set into their data frame.
'data.frame':   2 obs. of  7 variables:
 $ Year       : int  1979 1980
 $ Price      : num  6.95 6.5
 $ WinterRain : int  717 578
 $ AGST       : num  16.2 16
 $ HarvestRain: int  122 74
 $ Age        : int  4 3
 $ FrancePop  : num  54836 55110
</pre>

<p>
Now we can use this data set to make some predictions
</p>

<div class="org-src-container">

<pre class="src src-R">writeLines(<span style="color: #fffacd;">"\n :: Make test set predictions"</span>)
predictTest <span style="color: #db7093;">&lt;-</span> predict(model4, newdata=wineTest)
predictTest
</pre>
</div>

<pre class="example">
 :: Make test set predictions
       1        2
6.768925 6.684910
</pre>

<p>
Actually the predictions are very close to the real data in the test
wine data set. Now we can calculate the \(R^2\) to know how good is this
prediction.
</p>

<div class="org-src-container">

<pre class="src src-R">writeLines(<span style="color: #fffacd;">"\n :: Compute R-squared"</span>)
SSE = sum((wineTest$Price - predictTest)^2)
SST = sum((wineTest$Price - mean(wine$Price))^2)
1 - SSE/SST
</pre>
</div>

<pre class="example">
 :: Compute R-squared
[1] 0.7944278
</pre>

<p>
This is a pretty good out-of-sample R-squared. But while we do well on
these two test points, keep in mind that our test set is really small.
We should increase the size of our test set to be more confident about
the out-of-sample accuracy of our model.
</p>


<div class="figure">
<p><img src="../graphs/outOfSample-Rsq.png" alt="outOfSample-Rsq.png" />
</p>
</div>

<p>
The model R-squared will always increase or stay the same as we add
more independent variables.
</p>

<p>
However, this is not true for the test set. When selecting a model, we
want one with a good model R-squared but also with a good test set
R-squared.
</p>

<p>
It looks like <b>our model that uses</b> <b>AGST</b>, <b>HarvestRain</b>, <b>Age</b>, and
<b>WinterRain</b> does very well on the training data and on the test
data.
</p>
</div>
</div>

<div id="outline-container-sec-1-11" class="outline-3">
<h3 id="sec-1-11"><span class="section-number-3">1.11</span> Quick Question (1 point possible)</h3>
<div class="outline-text-3" id="text-1-11">
<p>
Which of the following are NOT valid values for an out-of-sample (test
set) \(R^2\) ? Select all that apply.
</p>
</div>

<div id="outline-container-sec-1-11-1" class="outline-4">
<h4 id="sec-1-11-1"><span class="section-number-4">1.11.1</span> Answer</h4>
<div class="outline-text-4" id="text-1-11-1">
<p>
<b>Explanation</b>
</p>

<p>
The formula for \(R^2\) is
</p>

<p>
\(R^2 = 1 - \frac{SSE}{SST}\),
</p>

<p>
where \(SST\) is calculated using the average value of the dependent
variable on the training set.
</p>

<p>
Since \(SSE\) and \(SST\) are the sums of squared terms, we know that both
will be positive. Thus SSE/SST must be greater than or equal to
zero. This means it is not possible to have an out-of-sample \(R^2\)
value of 2.4.
</p>

<p>
However, all other values are valid (even the negative ones!), since
SSE can be more or less than SST, due to the fact that this is an
out-of-sample \(R^2\), not a model \(R^2\).
</p>
</div>
</div>
</div>
</div>
</div>
<div id="postamble" class="status">
<p class="date">Date: 11/06/2015</p>
<p class="author">Author: Sergio-Feliciano Mendoza-Barrera</p>
<p class="date">Created: 2015-06-12 Fri 07:46</p>
<p class="creator"><a href="http://www.gnu.org/software/emacs/">Emacs</a> 24.5.1 (<a href="http://orgmode.org">Org</a> mode 8.2.10)</p>
<p class="validation"><a href="http://validator.w3.org/check?uri=referer">Validate</a></p>
</div>
</body>
</html>
