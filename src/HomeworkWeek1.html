<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<head>
<title>Homework Week 1</title>
<!-- 2015-06-07 Sun 08:50 -->
<meta  http-equiv="Content-Type" content="text/html;charset=utf-8" />
<meta  name="generator" content="Org-mode" />
<meta  name="author" content="Sergio-Feliciano Mendoza-Barrera" />
<meta  name="description" content="R introduction, remembering the syntax and some useful examples"
 />
<meta  name="keywords" content="R, data science, emacs, ESS, org-mode" />
<style type="text/css">
 <!--/*--><![CDATA[/*><!--*/
  .title  { text-align: center; }
  .todo   { font-family: monospace; color: red; }
  .done   { color: green; }
  .tag    { background-color: #eee; font-family: monospace;
            padding: 2px; font-size: 80%; font-weight: normal; }
  .timestamp { color: #bebebe; }
  .timestamp-kwd { color: #5f9ea0; }
  .right  { margin-left: auto; margin-right: 0px;  text-align: right; }
  .left   { margin-left: 0px;  margin-right: auto; text-align: left; }
  .center { margin-left: auto; margin-right: auto; text-align: center; }
  .underline { text-decoration: underline; }
  #postamble p, #preamble p { font-size: 90%; margin: .2em; }
  p.verse { margin-left: 3%; }
  pre {
    border: 1px solid #ccc;
    box-shadow: 3px 3px 3px #eee;
    padding: 8pt;
    font-family: monospace;
    overflow: auto;
    margin: 1.2em;
  }
  pre.src {
    position: relative;
    overflow: visible;
    padding-top: 1.2em;
  }
  pre.src:before {
    display: none;
    position: absolute;
    background-color: white;
    top: -10px;
    right: 10px;
    padding: 3px;
    border: 1px solid black;
  }
  pre.src:hover:before { display: inline;}
  pre.src-sh:before    { content: 'sh'; }
  pre.src-bash:before  { content: 'sh'; }
  pre.src-emacs-lisp:before { content: 'Emacs Lisp'; }
  pre.src-R:before     { content: 'R'; }
  pre.src-perl:before  { content: 'Perl'; }
  pre.src-java:before  { content: 'Java'; }
  pre.src-sql:before   { content: 'SQL'; }

  table { border-collapse:collapse; }
  caption.t-above { caption-side: top; }
  caption.t-bottom { caption-side: bottom; }
  td, th { vertical-align:top;  }
  th.right  { text-align: center;  }
  th.left   { text-align: center;   }
  th.center { text-align: center; }
  td.right  { text-align: right;  }
  td.left   { text-align: left;   }
  td.center { text-align: center; }
  dt { font-weight: bold; }
  .footpara:nth-child(2) { display: inline; }
  .footpara { display: block; }
  .footdef  { margin-bottom: 1em; }
  .figure { padding: 1em; }
  .figure p { text-align: center; }
  .inlinetask {
    padding: 10px;
    border: 2px solid gray;
    margin: 10px;
    background: #ffffcc;
  }
  #org-div-home-and-up
   { text-align: right; font-size: 70%; white-space: nowrap; }
  textarea { overflow-x: auto; }
  .linenr { font-size: smaller }
  .code-highlighted { background-color: #ffff00; }
  .org-info-js_info-navigation { border-style: none; }
  #org-info-js_console-label
    { font-size: 10px; font-weight: bold; white-space: nowrap; }
  .org-info-js_search-highlight
    { background-color: #ffff00; color: #000000; font-weight: bold; }
  /*]]>*/-->
</style>
<link rel="stylesheet" type="text/css" href="http://www.pirilampo.org/styles/bigblow/css/htmlize.css"/>
<link rel="stylesheet" type="text/css" href="http://www.pirilampo.org/styles/bigblow/css/bigblow.css"/>
<link rel="stylesheet" type="text/css" href="http://www.pirilampo.org/styles/bigblow/css/hideshow.css"/>
<script type="text/javascript" src="http://www.pirilampo.org/styles/bigblow/js/jquery-1.11.0.min.js"></script>
<script type="text/javascript" src="http://www.pirilampo.org/styles/bigblow/js/jquery-ui-1.10.2.min.js"></script>
<script type="text/javascript" src="http://www.pirilampo.org/styles/bigblow/js/jquery.localscroll-min.js"></script>
<script type="text/javascript" src="http://www.pirilampo.org/styles/bigblow/js/jquery.scrollTo-1.4.3.1-min.js"></script>
<script type="text/javascript" src="http://www.pirilampo.org/styles/bigblow/js/jquery.zclip.min.js"></script>
<script type="text/javascript" src="http://www.pirilampo.org/styles/bigblow/js/bigblow.js"></script>
<script type="text/javascript" src="http://www.pirilampo.org/styles/bigblow/js/hideshow.js"></script>
<script type="text/javascript" src="http://www.pirilampo.org/styles/lib/js/jquery.stickytableheaders.min.js"></script>
<script type="text/javascript">
/*
@licstart  The following is the entire license notice for the
JavaScript code in this tag.

Copyright (C) 2012-2013 Free Software Foundation, Inc.

The JavaScript code in this tag is free software: you can
redistribute it and/or modify it under the terms of the GNU
General Public License (GNU GPL) as published by the Free Software
Foundation, either version 3 of the License, or (at your option)
any later version.  The code is distributed WITHOUT ANY WARRANTY;
without even the implied warranty of MERCHANTABILITY or FITNESS
FOR A PARTICULAR PURPOSE.  See the GNU GPL for more details.

As additional permission under GNU GPL version 3 section 7, you
may distribute non-source (e.g., minimized or compacted) forms of
that code without the copy of the GNU GPL normally required by
section 4, provided you include this license notice and a URL
through which recipients can access the Corresponding Source.


@licend  The above is the entire license notice
for the JavaScript code in this tag.
*/
<!--/*--><![CDATA[/*><!--*/
 function CodeHighlightOn(elem, id)
 {
   var target = document.getElementById(id);
   if(null != target) {
     elem.cacheClassElem = elem.className;
     elem.cacheClassTarget = target.className;
     target.className = "code-highlighted";
     elem.className   = "code-highlighted";
   }
 }
 function CodeHighlightOff(elem, id)
 {
   var target = document.getElementById(id);
   if(elem.cacheClassElem)
     elem.className = elem.cacheClassElem;
   if(elem.cacheClassTarget)
     target.className = elem.cacheClassTarget;
 }
/*]]>*///-->
</script>
</head>
<body>
<div id="content">
<h1 class="title">Homework Week 1</h1>
<div class="abstract">
<p>
Homework week 1 part 1. An analytical detective.
</p>

</div>

<div id="outline-container-sec-1" class="outline-2">
<h2 id="sec-1"><span class="section-number-2">1</span> An analytical detective</h2>
<div class="outline-text-2" id="text-1">
<p>
Crime is an international concern, but it is documented and handled in
very different ways in different countries. In the United States,
violent crimes and property crimes are recorded by the Federal Bureau
of Investigation (FBI).  Additionally, each city documents crime, and
some cities release data regarding crime rates. The city of Chicago,
Illinois releases crime data from 2001 onward <a href="https://data.cityofchicago.org/Public-Safety/Crimes-2001-to-present/ijzp-q8t2">online</a>.
</p>

<p>
Chicago is the third most populous city in the United States, with a
population of over 2.7 million people. The city of Chicago is shown in
the map below, with the state of Illinois highlighted in red.
</p>


<div class="figure">
<p><img src="../graphs/ChicagoMap.png" alt="ChicagoMap.png" />
</p>
</div>

<p>
There are two main types of crimes: violent crimes, and property
crimes. In this problem, we'll focus on one specific type of property
crime, called "motor vehicle theft" (sometimes referred to as grand
theft auto). This is the act of stealing, or attempting to steal, a
car. In this problem, we'll use some basic data analysis in R to
understand the motor vehicle thefts in Chicago.
</p>

<p>
Please download the file <a href="https://courses.edx.org/asset-v1:MITx+15.071x_2a+2T2015+type@asset+block/mvtWeek1.csv">mvtWeek1.csv</a> for this problem (do not open
this file in any spreadsheet software before completing this problem
because it might change the format of the Date field). Here is a list
of descriptions of the variables:
</p>

<ul class="org-ul">
<li><b>ID</b>: a unique identifier for each observation
</li>
<li><b>Date</b>: the date the crime occurred
</li>
<li><b>LocationDescription</b>: the location where the crime occurred
</li>
<li><b>Arrest</b>: whether or not an arrest was made for the crime (TRUE if an
arrest was made, and FALSE if an arrest was not made)
</li>
<li><b>Domestic</b>: whether or not the crime was a domestic crime, meaning
that it was committed against a family member (TRUE if it was
domestic, and FALSE if it was not domestic)
</li>
<li><b>Beat</b>: the area, or "beat" in which the crime occurred. This is the
smallest regional division defined by the Chicago police
department.
</li>
<li><b>District</b>: the police district in which the crime occured. Each
district is composed of many beats, and are defined by the Chicago
Police Department.
</li>
<li><b>CommunityArea</b>: the community area in which the crime occurred. Since
the 1920s, Chicago has been divided into what are called "community
areas", of which there are now 77. The community areas were devised
in an attempt to create socially homogeneous regions.
</li>
<li><b>Year</b>: the year in which the crime occurred.
</li>
<li><b>Latitude</b>: the latitude of the location at which the crime occurred.
</li>
<li><b>Longitude</b>: the longitude of the location at which the crime
occurred.
</li>
</ul>
</div>

<div id="outline-container-sec-1-1" class="outline-3">
<h3 id="sec-1-1"><span class="section-number-3">1.1</span> Problem 1.1 - Loading the Data (1 point possible)</h3>
<div class="outline-text-3" id="text-1-1">
<p>
Read the dataset mvtWeek1.csv into R, using the read.csv function, and
call the data frame "mvt". Remember to navigate to the directory on
your computer containing the file mvtWeek1.csv first. It may take a
few minutes to read in the data, since it is pretty large. Then, use
the str and summary functions to answer the following questions.
</p>

<p>
How many rows of data (observations) are in this dataset?
</p>
</div>

<div id="outline-container-sec-1-1-1" class="outline-4">
<h4 id="sec-1-1-1"><span class="section-number-4">1.1.1</span> Download the data sets</h4>
<div class="outline-text-4" id="text-1-1-1">
<p>
In this part we can download the data
</p>

<div class="org-src-container">

<pre class="src src-R">rm(list = ls())                         <span style="color: #9932cc;"># </span><span style="color: #ba55d3;">Remove all workspace data</span>
<span style="color: #db7093;">library</span>(parallel)

<span style="color: #4682b4;">if</span>(!file.exists(<span style="color: #fffacd;">"../data"</span>)) {
        dir.create(<span style="color: #fffacd;">"../data"</span>)
}

fileUrl <span style="color: #db7093;">&lt;-</span>
        <span style="color: #fffacd;">"https://courses.edx.org/asset-v1:MITx+15.071x_2a+2T2015+type@asset+block/mvtWeek1.csv"</span>
fileName <span style="color: #db7093;">&lt;-</span> <span style="color: #fffacd;">"mvtWeek1.csv"</span>

dataPath <span style="color: #db7093;">&lt;-</span> <span style="color: #fffacd;">"../data"</span>
filePath <span style="color: #db7093;">&lt;-</span> paste(dataPath, fileName, sep = <span style="color: #fffacd;">"/"</span>)

<span style="color: #4682b4;">if</span>(!file.exists(filePath)) {
        download.file(fileUrl, destfile = filePath, method = <span style="color: #fffacd;">"curl"</span>)
        list.files(<span style="color: #fffacd;">"../data"</span>)
        dateDownloaded <span style="color: #db7093;">&lt;-</span> date()
}
</pre>
</div>

<div class="org-src-container">

<pre class="src src-R">writeLines(<span style="color: #fffacd;">"    Loading data into mvt dataframe"</span>)
mvt <span style="color: #db7093;">&lt;-</span> read.table(filePath, sep = <span style="color: #fffacd;">","</span>, header = <span style="color: #3cb371;">TRUE</span>)

writeLines(<span style="color: #fffacd;">"    Initial analysis of data mvt"</span>)
dim(mvt)
str(mvt)
</pre>
</div>

<pre class="example">
    Loading data into mvt dataframe
    Initial analysis of data mvt
[1] 191641
'data.frame':	191641 obs. of  11 variables:
 $ ID                 : int  8951354 8951141 8952745 8952223 8951608 8950793 8950760 8951611 8951802 8950706 ...
 $ Date               : Factor w/ 131680 levels "1/1/01 0:01",..: 42823 42822 42822 42822 42821 42820 42819 42818 42816 42815 ...
 $ LocationDescription: Factor w/ 78 levels "ABANDONED BUILDING",..: 72 72 62 72 72 72 72 72 72 72 ...
 $ Arrest             : logi  FALSE FALSE FALSE FALSE FALSE TRUE ...
 $ Domestic           : logi  FALSE FALSE FALSE FALSE FALSE FALSE ...
 $ Beat               : int  623 1213 1622 724 211 2521 423 231 1021 1215 ...
 $ District           : int  6 12 16 7 2 25 4 2 10 12 ...
 $ CommunityArea      : int  69 24 11 67 35 19 48 40 29 24 ...
 $ Year               : int  2012 2012 2012 2012 2012 2012 2012 2012 2012 2012 ...
 $ Latitude           : num  41.8 41.9 42 41.8 41.8 ...
 $ Longitude          : num  -87.6 -87.7 -87.8 -87.7 -87.6 ...
</pre>
</div>
</div>

<div id="outline-container-sec-1-1-2" class="outline-4">
<h4 id="sec-1-1-2"><span class="section-number-4">1.1.2</span> Answer</h4>
<div class="outline-text-4" id="text-1-1-2">
<p>
<b>191641 observations</b>.
</p>
</div>
</div>
</div>

<div id="outline-container-sec-1-2" class="outline-3">
<h3 id="sec-1-2"><span class="section-number-3">1.2</span> Problem 1.2 - Loading the Data (1 point possible)</h3>
<div class="outline-text-3" id="text-1-2">
<p>
How many variables are in this dataset?
</p>

<div class="org-src-container">

<pre class="src src-R">writeLines(<span style="color: #fffacd;">"    Dimension of the dataframe"</span>)
dim(mvt)

writeLines(<span style="color: #fffacd;">"    Names of the dataframe"</span>)
names(mvt)

writeLines(<span style="color: #fffacd;">"    Any NA in the dataframe"</span>)
anyNA(mvt)
</pre>
</div>

<pre class="example">
    Dimension of the dataframe
[1] 191641     11
    Names of the dataframe
 [1] "ID"                  "Date"                "LocationDescription"
 [4] "Arrest"              "Domestic"            "Beat"
 [7] "District"            "CommunityArea"       "Year"
[10] "Latitude"            "Longitude"
    Any NA in the dataframe
[1] TRUE
</pre>
</div>

<div id="outline-container-sec-1-2-1" class="outline-4">
<h4 id="sec-1-2-1"><span class="section-number-4">1.2.1</span> Answer</h4>
<div class="outline-text-4" id="text-1-2-1">
<p>
<b>11 variables</b>.
</p>
</div>
</div>
</div>

<div id="outline-container-sec-1-3" class="outline-3">
<h3 id="sec-1-3"><span class="section-number-3">1.3</span> Problem 1.3 - Loading the Data (1 point possible)</h3>
<div class="outline-text-3" id="text-1-3">
<p>
Using the "max" function, what is the maximum value of the variable
"ID"?
</p>

<div class="org-src-container">

<pre class="src src-R">maxID <span style="color: #db7093;">&lt;-</span> mvt[which.max(mvt$ID), ]
maxID$ID
</pre>
</div>

<pre class="example">
[1] 9181151
</pre>
</div>

<div id="outline-container-sec-1-3-1" class="outline-4">
<h4 id="sec-1-3-1"><span class="section-number-4">1.3.1</span> Answer</h4>
<div class="outline-text-4" id="text-1-3-1">
<p>
<b>9181151</b>
</p>
</div>
</div>
</div>

<div id="outline-container-sec-1-4" class="outline-3">
<h3 id="sec-1-4"><span class="section-number-3">1.4</span> Problem 1.4 - Loading the Data (1 point possible)</h3>
<div class="outline-text-3" id="text-1-4">
<p>
What is the minimum value of the variable "Beat"?
</p>

<div class="org-src-container">

<pre class="src src-R">minBeat <span style="color: #db7093;">&lt;-</span> mvt[which.min(mvt$Beat), ]
minBeat$Beat
</pre>
</div>

<pre class="example">
[1] 111
</pre>
</div>

<div id="outline-container-sec-1-4-1" class="outline-4">
<h4 id="sec-1-4-1"><span class="section-number-4">1.4.1</span> Answer</h4>
<div class="outline-text-4" id="text-1-4-1">
<p>
<b>111</b>
</p>
</div>
</div>
</div>

<div id="outline-container-sec-1-5" class="outline-3">
<h3 id="sec-1-5"><span class="section-number-3">1.5</span> Problem 1.5 - Loading the Data (1 point possible)</h3>
<div class="outline-text-3" id="text-1-5">
<p>
How many observations have value TRUE in the Arrest variable (this is
the number of crimes for which an arrest was made)?
</p>

<div class="org-src-container">

<pre class="src src-R">TArrest <span style="color: #db7093;">&lt;-</span> subset(mvt, Arrest == <span style="color: #3cb371;">TRUE</span>)
dim(TArrest)
</pre>
</div>

<pre class="example">
[1] 15536
</pre>
</div>

<div id="outline-container-sec-1-5-1" class="outline-4">
<h4 id="sec-1-5-1"><span class="section-number-4">1.5.1</span> Answer</h4>
<div class="outline-text-4" id="text-1-5-1">
<p>
<b>15536</b>
</p>
</div>
</div>
</div>

<div id="outline-container-sec-1-6" class="outline-3">
<h3 id="sec-1-6"><span class="section-number-3">1.6</span> Problem 1.6 - Loading the Data (1 point possible)</h3>
<div class="outline-text-3" id="text-1-6">
<p>
How many observations have a LocationDescription value of ALLEY?
</p>

<div class="org-src-container">

<pre class="src src-R">dim(subset(mvt, LocationDescription == <span style="color: #fffacd;">"ALLEY"</span>))
</pre>
</div>

<pre class="example">
[1] 2308
</pre>
</div>

<div id="outline-container-sec-1-6-1" class="outline-4">
<h4 id="sec-1-6-1"><span class="section-number-4">1.6.1</span> Answer</h4>
<div class="outline-text-4" id="text-1-6-1">
<p>
<b>2308</b>
</p>
</div>
</div>
</div>

<div id="outline-container-sec-1-7" class="outline-3">
<h3 id="sec-1-7"><span class="section-number-3">1.7</span> Problem 2.1 - Understanding Dates in R (1 point possible)</h3>
<div class="outline-text-3" id="text-1-7">
<p>
In many datasets, like this one, you have a date field. Unfortunately,
R does not automatically recognize entries that look like dates. We
need to use a function in R to extract the date and time. Take a look
at the first entry of Date (remember to use square brackets when
looking at a certain entry of a variable).
</p>

<p>
In what format are the entries in the variable Date?
</p>

<div class="org-src-container">

<pre class="src src-R">head(mvt$Date, 1)
</pre>
</div>

<pre class="example">
[1] 12/31/12 23:15
131680 Levels: 1/1/01 0:01 1/1/01 0:05 1/1/01 0:30 1/1/01 10:00 ... 9/9/12 9:50
</pre>
</div>

<div id="outline-container-sec-1-7-1" class="outline-4">
<h4 id="sec-1-7-1"><span class="section-number-4">1.7.1</span> Answer</h4>
<div class="outline-text-4" id="text-1-7-1">
<p>
If you type mvt$Date<sup><a id="fnr.1" name="fnr.1" class="footref" href="#fn.1">1</a></sup> in your R console, you can see that the first
entry is 12/31/12 23:15. This must be in the format Month/Day/Year
Hour:Minute.
</p>
</div>
</div>
</div>

<div id="outline-container-sec-1-8" class="outline-3">
<h3 id="sec-1-8"><span class="section-number-3">1.8</span> Problem 2.2 - Understanding Dates in R (1 point possible)</h3>
<div class="outline-text-3" id="text-1-8">
<p>
Now, let's convert these characters into a Date object in R. In your R
console, type
</p>

<p>
DateConvert = as.Date(strptime(mvt$Date, "%m/%d/%y %H:%M"))
</p>

<p>
This converts the variable "Date" into a Date object in R. Take a look
at the variable DateConvert using the summary function.
</p>

<p>
What is the month and year of the median date in our dataset? Enter
your answer as "Month Year", without the quotes. (Ex: if the answer
was 2008-03-28, you would give the answer "March 2008", without the
quotes.)
</p>

<div class="org-src-container">

<pre class="src src-R">DateConvert <span style="color: #db7093;">&lt;-</span> as.Date(strptime(mvt$Date, <span style="color: #fffacd;">"%m/%d/%y %H:%M"</span>))
class(DateConvert)

summary(DateConvert)
</pre>
</div>

<pre class="example">
[1] "Date"
        Min.      1st Qu.       Median         Mean      3rd Qu.         Max.
"2001-01-01" "2003-07-10" "2006-05-21" "2006-08-23" "2009-10-24" "2012-12-31"
</pre>
</div>

<div id="outline-container-sec-1-8-1" class="outline-4">
<h4 id="sec-1-8-1"><span class="section-number-4">1.8.1</span> Answer</h4>
<div class="outline-text-4" id="text-1-8-1">
<p>
The median date is <b>May 2006</b>
</p>
</div>
</div>
</div>

<div id="outline-container-sec-1-9" class="outline-3">
<h3 id="sec-1-9"><span class="section-number-3">1.9</span> Problem 2.3 - Understanding Dates in R (1 point possible)</h3>
<div class="outline-text-3" id="text-1-9">
<p>
Now, let's extract the month and the day of the week, and add these
variables to our data frame mvt. We can do this with two simple
functions. Type the following commands in R:
</p>

<div class="org-src-container">

<pre class="src src-R">mvt$Month = months(DateConvert)
mvt$Weekday = weekdays(DateConvert)
</pre>
</div>

<p>
This creates two new variables in our data frame, Month and Weekday,
and sets them equal to the month and weekday values that we can
extract from the Date object. Lastly, replace the old Date variable
with DateConvert by typing:
</p>

<div class="org-src-container">

<pre class="src src-R">mvt$Date = DateConvert
</pre>
</div>

<p>
Using the table command, answer the following questions.
</p>

<p>
In which month did the fewest motor vehicle thefts occur?
</p>

<div class="org-src-container">

<pre class="src src-R">head(mvt, 3)
table(mvt$Month)
</pre>
</div>

<pre class="example">
       ID       Date           LocationDescription Arrest Domestic Beat
1 8951354 2012-12-31                        STREET  FALSE    FALSE  623
2 8951141 2012-12-31                        STREET  FALSE    FALSE 1213
3 8952745 2012-12-31 RESIDENTIAL YARD (FRONT/BACK)  FALSE    FALSE 1622
  District CommunityArea Year Latitude Longitude    Month Weekday
1        6            69 2012 41.75628 -87.62164 December  Monday
2       12            24 2012 41.89879 -87.66130 December  Monday
3       16            11 2012 41.96919 -87.76767 December  Monday

    April    August  December  February   January      July      June     March
    15280     16572     16426     13511     16047     16801     16002     15758
      May  November   October September
    16035     16063     17086     16060
</pre>
</div>

<div id="outline-container-sec-1-9-1" class="outline-4">
<h4 id="sec-1-9-1"><span class="section-number-4">1.9.1</span> Answer</h4>
<div class="outline-text-4" id="text-1-9-1">
<p>
<b>February</b>.
</p>
</div>
</div>
</div>

<div id="outline-container-sec-1-10" class="outline-3">
<h3 id="sec-1-10"><span class="section-number-3">1.10</span> Problem 2.4 - Understanding Dates in R (1 point possible)</h3>
<div class="outline-text-3" id="text-1-10">
<p>
On which weekday did the most motor vehicle thefts occur?
</p>

<div class="org-src-container">

<pre class="src src-R">head(mvt, 3)
table(mvt$Weekday)
</pre>
</div>

<pre class="example">
       ID       Date           LocationDescription Arrest Domestic Beat
1 8951354 2012-12-31                        STREET  FALSE    FALSE  623
2 8951141 2012-12-31                        STREET  FALSE    FALSE 1213
3 8952745 2012-12-31 RESIDENTIAL YARD (FRONT/BACK)  FALSE    FALSE 1622
  District CommunityArea Year Latitude Longitude    Month Weekday
1        6            69 2012 41.75628 -87.62164 December  Monday
2       12            24 2012 41.89879 -87.66130 December  Monday
3       16            11 2012 41.96919 -87.76767 December  Monday

   Friday    Monday  Saturday    Sunday  Thursday   Tuesday Wednesday
    29284     27397     27118     26316     27319     26791     27416
</pre>
</div>

<div id="outline-container-sec-1-10-1" class="outline-4">
<h4 id="sec-1-10-1"><span class="section-number-4">1.10.1</span> Answer</h4>
<div class="outline-text-4" id="text-1-10-1">
<p>
<b>Friday</b>.
</p>
</div>
</div>
</div>

<div id="outline-container-sec-1-11" class="outline-3">
<h3 id="sec-1-11"><span class="section-number-3">1.11</span> Problem 2.5 - Understanding Dates in R (1 point possible)</h3>
<div class="outline-text-3" id="text-1-11">
<p>
Each observation in the dataset represents a motor vehicle theft, and
the Arrest variable indicates whether an arrest was later made for
this theft. Which month has the largest number of motor vehicle thefts
for which an arrest was made?
</p>

<div class="org-src-container">

<pre class="src src-R">table(mvt$Month, mvt$Arrest)
</pre>
</div>

<pre class="example">
          FALSE  TRUE
April     14028  1252
August    15243  1329
December  15029  1397
February  12273  1238
January   14612  1435
July      15477  1324
June      14772  1230
March     14460  1298
May       14848  1187
November  14807  1256
October   15744  1342
September 14812  1248
</pre>
</div>

<div id="outline-container-sec-1-11-1" class="outline-4">
<h4 id="sec-1-11-1"><span class="section-number-4">1.11.1</span> Answer</h4>
<div class="outline-text-4" id="text-1-11-1">
<p>
If you type table(mvt$Arrest,mvt$Month), you can see that the largest
number of observations with Arrest=TRUE occurs in the month of
<b>January</b>.
</p>
</div>
</div>
</div>

<div id="outline-container-sec-1-12" class="outline-3">
<h3 id="sec-1-12"><span class="section-number-3">1.12</span> Problem 3.1 - Visualizing Crime Trends (3 points possible)</h3>
<div class="outline-text-3" id="text-1-12">
<p>
Now, let's make some plots to help us better understand how crime has
changed over time in Chicago. Throughout this problem, and in general,
you can save your plot to a file. For more information, <a href="http://www.stat.berkeley.edu/~s133/saving.html">this website</a>
very clearly explains the process.
</p>

<p>
First, let's make a histogram of the variable <b>Date</b>. We'll add an extra
argument, to specify the number of bars we want in our histogram. In
your R console, type
</p>


<div class="figure">
<p><img src="../graphs/MVTDate.png" alt="MVTDate.png" />
</p>
</div>

<p>
Looking at the histogram, answer the following questions.
</p>
</div>

<div id="outline-container-sec-1-12-1" class="outline-4">
<h4 id="sec-1-12-1"><span class="section-number-4">1.12.1</span> In general, does it look like crime increases or decreases from 2002 - 2012?</h4>
<div class="outline-text-4" id="text-1-12-1">
</div><div id="outline-container-sec-1-12-1-1" class="outline-5">
<h5 id="sec-1-12-1-1"><span class="section-number-5">1.12.1.1</span> Answer</h5>
<div class="outline-text-5" id="text-1-12-1-1">
<p>
<b>Decreases Decreases - correct</b>
</p>
</div>
</div>
</div>

<div id="outline-container-sec-1-12-2" class="outline-4">
<h4 id="sec-1-12-2"><span class="section-number-4">1.12.2</span> In general, does it look like crime increases or decreases from 2005 - 2008?</h4>
<div class="outline-text-4" id="text-1-12-2">
</div><div id="outline-container-sec-1-12-2-1" class="outline-5">
<h5 id="sec-1-12-2-1"><span class="section-number-5">1.12.2.1</span> Answer</h5>
<div class="outline-text-5" id="text-1-12-2-1">
<p>
<b>Decreases Decreases - correct</b>
</p>
</div>
</div>
</div>

<div id="outline-container-sec-1-12-3" class="outline-4">
<h4 id="sec-1-12-3"><span class="section-number-4">1.12.3</span> In general, does it look like crime increases or decreases from 2009 - 2011?</h4>
</div>

<div id="outline-container-sec-1-12-4" class="outline-4">
<h4 id="sec-1-12-4"><span class="section-number-4">1.12.4</span> Answer</h4>
<div class="outline-text-4" id="text-1-12-4">
<p>
<b>Increases Increases - correct</b>
</p>
</div>
</div>
</div>

<div id="outline-container-sec-1-13" class="outline-3">
<h3 id="sec-1-13"><span class="section-number-3">1.13</span> Problem 3.2 - Visualizing Crime Trends (1 point possible)</h3>
<div class="outline-text-3" id="text-1-13">
<p>
Now, let's see how arrests have changed over time. Create a boxplot of
the variable "Date", sorted by the variable "Arrest" (if you are not
familiar with boxplots and would like to learn more, check out this
tutorial). In a boxplot, the bold horizontal line is the median value
of the data, the box shows the range of values between the first
quartile and third quartile, and the whiskers (the dotted lines
extending outside the box) show the minimum and maximum values,
excluding any outliers (which are plotted as circles). Outliers are
defined by first computing the difference between the first and third
quartile values, or the height of the box. This number is called the
Inter-Quartile Range (IQR). Any point that is greater than the third
quartile plus the IQR or less than the first quartile minus the IQR is
considered an outlier.
</p>


<div class="figure">
<p><img src="../graphs/BPDate.png" alt="BPDate.png" />
</p>
</div>

<p>
Does it look like there were more crimes for which arrests were made
in the first half of the time period or the second half of the time
period? (Note that the time period is from 2001 to 2012, so the middle
of the time period is the beginning of 2007.)
</p>
</div>

<div id="outline-container-sec-1-13-1" class="outline-4">
<h4 id="sec-1-13-1"><span class="section-number-4">1.13.1</span> Answer</h4>
<div class="outline-text-4" id="text-1-13-1">
<p>
<b>First half</b>.
</p>

<p>
You can create the boxplot with the command boxplot(mvt$Date ~
mvt$Arrest). If you look at the boxplot, the one for Arrest=TRUE is
definitely skewed towards the bottom of the plot, meaning that there
were more crimes for which arrests were made in the first half of the
time period.
</p>
</div>
</div>
</div>

<div id="outline-container-sec-1-14" class="outline-3">
<h3 id="sec-1-14"><span class="section-number-3">1.14</span> Problem 3.3 - Visualizing Crime Trends (2 points possible)</h3>
<div class="outline-text-3" id="text-1-14">
<p>
Let's investigate this further. Use the table function for the next
few questions.
</p>

<p>
For what proportion of motor vehicle thefts in 2001 was an arrest
made?
</p>

<p>
Note: in this question and many others in the course, we are asking
for an answer as a proportion. Therefore, your answer should take a
value between 0 and 1.
</p>

<div class="org-src-container">

<pre class="src src-R"><span style="color: #db7093;">library</span>(lubridate)
mvt$Year <span style="color: #db7093;">&lt;-</span> year(mvt$Date)
table(mvt$Year, mvt$Arrest)

writeLines(<span style="color: #fffacd;">"\n        Proportion of vehicle thefts in 2001:"</span>)
print(2152 / (2152 + 18517))
</pre>
</div>

<pre class="example">
       FALSE  TRUE
  2001 18517  2152
  2002 16638  2115
  2003 14859  1798
  2004 15169  1693
  2005 14956  1528
  2006 14796  1302
  2007 13068  1212
  2008 13425  1020
  2009 11327   840
  2010 14796   701
  2011 15012   625
  2012 13542   550

        Proportion of vehicle thefts in 2001:
[1] 0.1041173
</pre>
</div>

<div id="outline-container-sec-1-14-1" class="outline-4">
<h4 id="sec-1-14-1"><span class="section-number-4">1.14.1</span> Answer</h4>
<div class="outline-text-4" id="text-1-14-1">
<p>
If you create a table using the command table(mvt$Arrest, mvt$Year),
the column for 2001 has 2152 observations with Arrest=TRUE and 18517
observations with Arrest=FALSE. The fraction of motor vehicle thefts
in 2001 for which an arrest was made is thus
</p>

<p>
<b>2152/(2152+18517) = 0.1041173</b>.
</p>
</div>
</div>
</div>

<div id="outline-container-sec-1-15" class="outline-3">
<h3 id="sec-1-15"><span class="section-number-3">1.15</span> Problem 3.4 - Visualizing Crime Trends (1 point possible)</h3>
<div class="outline-text-3" id="text-1-15">
<p>
For what proportion of motor vehicle thefts in 2007 was an arrest
made?
</p>

<div class="org-src-container">

<pre class="src src-R"><span style="color: #db7093;">library</span>(lubridate)
mvt$Year <span style="color: #db7093;">&lt;-</span> year(mvt$Date)
table(mvt$Year, mvt$Arrest)

writeLines(<span style="color: #fffacd;">"\n        Proportion of vehicle thefts in 2007:"</span>)
print(1212 / (13068 + 1212))
</pre>
</div>

<pre class="example">
       FALSE  TRUE
  2001 18517  2152
  2002 16638  2115
  2003 14859  1798
  2004 15169  1693
  2005 14956  1528
  2006 14796  1302
  2007 13068  1212
  2008 13425  1020
  2009 11327   840
  2010 14796   701
  2011 15012   625
  2012 13542   550

        Proportion of vehicle thefts in 2007:
[1] 0.08487395
</pre>
</div>

<div id="outline-container-sec-1-15-1" class="outline-4">
<h4 id="sec-1-15-1"><span class="section-number-4">1.15.1</span> Answer</h4>
<div class="outline-text-4" id="text-1-15-1">
<p>
If you create a table using the command table(mvt$Arrest, mvt$Year),
the column for 2007 has 1212 observations with Arrest=TRUE and 13068
observations with Arrest=FALSE. The fraction of motor vehicle thefts
in 2007 for which an arrest was made is thus
</p>

<p>
<b>1212/(1212+13068) = 0.08487395</b>.
</p>
</div>
</div>
</div>

<div id="outline-container-sec-1-16" class="outline-3">
<h3 id="sec-1-16"><span class="section-number-3">1.16</span> Problem 3.5 - Visualizing Crime Trends (1 point possible)</h3>
<div class="outline-text-3" id="text-1-16">
<p>
For what proportion of motor vehicle thefts in 2012 was an arrest
made?
</p>

<div class="org-src-container">

<pre class="src src-R"><span style="color: #db7093;">library</span>(lubridate)
mvt$Year <span style="color: #db7093;">&lt;-</span> year(mvt$Date)
table(mvt$Year, mvt$Arrest)

writeLines(<span style="color: #fffacd;">"\n        Proportion of vehicle thefts in 2012:"</span>)
print(550 / (13542 + 550))
</pre>
</div>

<pre class="example">
       FALSE  TRUE
  2001 18517  2152
  2002 16638  2115
  2003 14859  1798
  2004 15169  1693
  2005 14956  1528
  2006 14796  1302
  2007 13068  1212
  2008 13425  1020
  2009 11327   840
  2010 14796   701
  2011 15012   625
  2012 13542   550

        Proportion of vehicle thefts in 2012:
[1] 0.03902924
</pre>

<p>
Since there may still be open investigations for recent crimes, this
could explain the trend we are seeing in the data. There could also be
other factors at play, and this trend should be investigated
further. However, since we don't know when the arrests were actually
made, our detective work in this area has reached a dead end.
</p>
</div>

<div id="outline-container-sec-1-16-1" class="outline-4">
<h4 id="sec-1-16-1"><span class="section-number-4">1.16.1</span> Answer</h4>
<div class="outline-text-4" id="text-1-16-1">
<p>
If you create a table using the command table(mvt$Arrest, mvt$Year),
the column for 2012 has 550 observations with Arrest=TRUE and 13542
observations with Arrest=FALSE. The fraction of motor vehicle thefts
in 2012 for which an arrest was made is thus
</p>

<p>
<b>550/(550+13542) = 0.03902924</b>.
</p>
</div>
</div>
</div>

<div id="outline-container-sec-1-17" class="outline-3">
<h3 id="sec-1-17"><span class="section-number-3">1.17</span> Problem 4.1 - Popular Locations (1 point possible)</h3>
<div class="outline-text-3" id="text-1-17">
<p>
Analyzing this data could be useful to the Chicago Police Department
when deciding where to allocate resources. If they want to increase
the number of arrests that are made for motor vehicle thefts, where
should they focus their efforts?
</p>

<p>
We want to find the top five locations where motor vehicle thefts
occur. If you create a table of the LocationDescription variable, it
is unfortunately very hard to read since there are 78 different
locations in the data set. By using the sort function, we can view
this same table, but sorted by the number of observations in each
category. In your R console, type:
</p>

<div class="org-src-container">

<pre class="src src-R">head(sort(table(mvt$LocationDescription), decreasing = <span style="color: #3cb371;">TRUE</span>), 6)
</pre>
</div>

<pre class="example">
     STREET PARKING LOT/GARAGE(NON.RESID.)
     156564                          14852
      OTHER                          ALLEY
       4573                           2308
GAS STATION         DRIVEWAY - RESIDENTIAL
       2111                           1675
</pre>

<p>
Which locations are the top five locations for motor vehicle thefts,
excluding the "Other" category? You should select 5 of the following
options.
</p>
</div>

<div id="outline-container-sec-1-17-1" class="outline-4">
<h4 id="sec-1-17-1"><span class="section-number-4">1.17.1</span> Answer</h4>
<div class="outline-text-4" id="text-1-17-1">
<p>
If you type sort(table(mvt$LocationDescription)), the locations with
the largest number of motor vehicle thefts are listed last. These are
Street, Parking Lot/Garage (Non. Resid.), Alley, Gas Station, and
Driveway - Residential.
</p>
</div>
</div>
</div>

<div id="outline-container-sec-1-18" class="outline-3">
<h3 id="sec-1-18"><span class="section-number-3">1.18</span> Problem 4.2 - Popular Locations (1 point possible)</h3>
<div class="outline-text-3" id="text-1-18">
<p>
Create a subset of your data, only taking observations for which the
theft happened in one of these five locations, and call this new data
set "Top5". To do this, you can use the | symbol. In lecture, we used
the &amp; symbol to use two criteria to make a subset of the data. To only
take observations that have a certain value in one variable or the
other, the | character can be used in place of the &amp; symbol. This is
also called a logical "or" operation.
</p>

<p>
Alternately, you could create five different subsets, and then merge
them together into one data frame using rbind.
</p>

<p>
How many observations are in Top5?
</p>

<div class="org-src-container">

<pre class="src src-R">Top5 <span style="color: #db7093;">&lt;-</span> subset(mvt, LocationDescription == <span style="color: #fffacd;">"STREET"</span> |
                    LocationDescription == <span style="color: #fffacd;">"PARKING LOT/GARAGE(NON.RESID.)"</span> |
                    LocationDescription == <span style="color: #fffacd;">"ALLEY"</span> |
                    LocationDescription == <span style="color: #fffacd;">"GAS STATION"</span> |
                    LocationDescription == <span style="color: #fffacd;">"DRIVEWAY - RESIDENTIAL"</span>)
head(Top5, 5)
writeLines(<span style="color: #fffacd;">"        The number of observations in Top5 are:"</span>)
print(dim(Top5))
</pre>
</div>

<pre class="example">
       ID       Date LocationDescription Arrest Domestic Beat District
1 8951354 2012-12-31              STREET  FALSE    FALSE  623        6
2 8951141 2012-12-31              STREET  FALSE    FALSE 1213       12
4 8952223 2012-12-31              STREET  FALSE    FALSE  724        7
5 8951608 2012-12-31              STREET  FALSE    FALSE  211        2
6 8950793 2012-12-31              STREET   TRUE    FALSE 2521       25
  CommunityArea Year Latitude Longitude    Month Weekday
1            69 2012 41.75628 -87.62164 December  Monday
2            24 2012 41.89879 -87.66130 December  Monday
4            67 2012 41.76933 -87.65773 December  Monday
5            35 2012 41.83757 -87.62176 December  Monday
6            19 2012 41.92856 -87.75400 December  Monday
        The number of observations in Top5 are:
[1] 177510
</pre>
</div>

<div id="outline-container-sec-1-18-1" class="outline-4">
<h4 id="sec-1-18-1"><span class="section-number-4">1.18.1</span> Answer</h4>
<div class="outline-text-4" id="text-1-18-1">
<p>
The procedure above is OK. We can do this in other way?
</p>

<p>
Another way of doing this would be to use the %in% operator in R. This
operator checks for inclusion in a set. You can create the same subset
by typing the following two lines in your R console:
</p>

<div class="org-src-container">

<pre class="src src-R">TopLocations <span style="color: #db7093;">&lt;-</span> c(<span style="color: #fffacd;">"STREET"</span>, <span style="color: #fffacd;">"PARKING LOT/GARAGE(NON.RESID.)"</span>, <span style="color: #fffacd;">"ALLEY"</span>,
                 <span style="color: #fffacd;">"GAS STATION"</span>, <span style="color: #fffacd;">"DRIVEWAY - RESIDENTIAL"</span>)
Top5 <span style="color: #db7093;">&lt;-</span> subset(mvt, LocationDescription %<span style="color: #4682b4;">in</span>% TopLocations)
head(Top5, 5)
writeLines(<span style="color: #fffacd;">"        The number of observations in Top5 are:"</span>)
print(dim(Top5))
</pre>
</div>

<pre class="example">
       ID       Date LocationDescription Arrest Domestic Beat District
1 8951354 2012-12-31              STREET  FALSE    FALSE  623        6
2 8951141 2012-12-31              STREET  FALSE    FALSE 1213       12
4 8952223 2012-12-31              STREET  FALSE    FALSE  724        7
5 8951608 2012-12-31              STREET  FALSE    FALSE  211        2
6 8950793 2012-12-31              STREET   TRUE    FALSE 2521       25
  CommunityArea Year Latitude Longitude    Month Weekday
1            69 2012 41.75628 -87.62164 December  Monday
2            24 2012 41.89879 -87.66130 December  Monday
4            67 2012 41.76933 -87.65773 December  Monday
5            35 2012 41.83757 -87.62176 December  Monday
6            19 2012 41.92856 -87.75400 December  Monday
        The number of observations in Top5 are:
[1] 177510
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-1-19" class="outline-3">
<h3 id="sec-1-19"><span class="section-number-3">1.19</span> Problem 4.3 - Popular Locations (2 points possible)</h3>
<div class="outline-text-3" id="text-1-19">
<p>
R will remember the other categories of the <b>LocationDescription</b>
variable from the original dataset, so running
<b>table(Top5$LocationDescription)</b> will have a lot of unnecessary
output. To make our tables a bit nicer to read, we can refresh this
factor variable. In your R console, type:
</p>

<div class="org-src-container">

<pre class="src src-R">Top5$LocationDescription <span style="color: #db7093;">&lt;-</span> factor(Top5$LocationDescription)
</pre>
</div>

<p>
If you run the str or table function on Top5 now, you should see that
LocationDescription now only has 5 values, as we expect.
</p>

<div class="org-src-container">

<pre class="src src-R">str(Top5)
</pre>
</div>

<pre class="example">
'data.frame':	177510 obs. of  13 variables:
 $ ID                 : int  8951354 8951141 8952223 8951608 8950793 8950760 8951611 8951802 8950706 8951585 ...
 $ Date               : Date, format: "2012-12-31" "2012-12-31" ...
 $ LocationDescription: Factor w/ 5 levels "ALLEY","DRIVEWAY - RESIDENTIAL",..: 5 5 5 5 5 5 5 5 5 5 ...
 $ Arrest             : logi  FALSE FALSE FALSE FALSE TRUE FALSE ...
 $ Domestic           : logi  FALSE FALSE FALSE FALSE FALSE FALSE ...
 $ Beat               : int  623 1213 724 211 2521 423 231 1021 1215 1011 ...
 $ District           : int  6 12 7 2 25 4 2 10 12 10 ...
 $ CommunityArea      : int  69 24 67 35 19 48 40 29 24 29 ...
 $ Year               : num  2012 2012 2012 2012 2012 ...
 $ Latitude           : num  41.8 41.9 41.8 41.8 41.9 ...
 $ Longitude          : num  -87.6 -87.7 -87.7 -87.6 -87.8 ...
 $ Month              : chr  "December" "December" "December" "December" ...
 $ Weekday            : chr  "Monday" "Monday" "Monday" "Monday" ...
</pre>

<p>
Use the Top5 data frame to answer the remaining questions.
</p>

<p>
One of the locations has a much higher arrest rate than the other
locations. Which is it? Please enter the text in exactly the same way
as how it looks in the answer options for Problem 4.1.
</p>

<div class="org-src-container">

<pre class="src src-R">table(Top5$LocationDescription, Top5$Arrest)

print(249 / (2059 + 249))                  <span style="color: #9932cc;"># </span><span style="color: #ba55d3;">ALLEY</span>
print(132 / (1543 + 132))                  <span style="color: #9932cc;"># </span><span style="color: #ba55d3;">DRIVEWAY - RESIDENTIAL</span>
print(439 / (1672 + 439))                  <span style="color: #9932cc;"># </span><span style="color: #ba55d3;">GAS STATION</span>
print(1603  / (13249 + 1603))              <span style="color: #9932cc;"># </span><span style="color: #ba55d3;">PARKING LOT/GARAGE(NON.RESID.)</span>
print(11595 / (144969 + 11595))            <span style="color: #9932cc;"># </span><span style="color: #ba55d3;">STREET</span>

writeLines(<span style="color: #fffacd;">"The highest arrest rate is located at: GAS STATION"</span>)
answer <span style="color: #db7093;">&lt;-</span> paste(<span style="color: #fffacd;">"with a"</span>, 439 / (1672 + 439), <span style="color: #fffacd;">"rate."</span>, sep = <span style="color: #fffacd;">" "</span>)
print(answer)
</pre>
</div>

<pre class="example">
                                  FALSE   TRUE
  ALLEY                            2059    249
  DRIVEWAY - RESIDENTIAL           1543    132
  GAS STATION                      1672    439
  PARKING LOT/GARAGE(NON.RESID.)  13249   1603
  STREET                         144969  11595
[1] 0.1078856
[1] 0.07880597
[1] 0.2079583
[1] 0.1079316
[1] 0.07405917
The highest arrest rate is located at: GAS STATION
[1] "with a 0.207958313595452 rate."
</pre>
</div>

<div id="outline-container-sec-1-19-1" class="outline-4">
<h4 id="sec-1-19-1"><span class="section-number-4">1.19.1</span> Answer</h4>
<div class="outline-text-4" id="text-1-19-1">
<p>
If you create a table of LocationDescription compared to Arrest,
table(Top5$LocationDescription, Top5$Arrest), you can then compute the
fraction of motor vehicle thefts that resulted in arrests at each
location. <b>Gas Station</b> has by far the highest percentage of arrests,
with over 20% of motor vehicle thefts resulting in an arrest.
</p>
</div>
</div>
</div>

<div id="outline-container-sec-1-20" class="outline-3">
<h3 id="sec-1-20"><span class="section-number-3">1.20</span> Problem 4.4 - Popular Locations (1 point possible)</h3>
<div class="outline-text-3" id="text-1-20">
<p>
On which day of the week do the most motor vehicle thefts at gas
stations happen?
</p>

<div class="org-src-container">

<pre class="src src-R">table(Top5$Weekday, Top5$LocationDescription)
</pre>
</div>

<pre class="example">
          ALLEY DRIVEWAY - RESIDENTIAL GAS STATION
Friday      385                    257         332
Monday      320                    255         280
Saturday    341                    202         338
Sunday      307                    221         336
Thursday    315                    263         282
Tuesday     323                    243         270
Wednesday   317                    234         273

          PARKING LOT/GARAGE(NON.RESID.) STREET
Friday                              2331  23773
Monday                              2128  22305
Saturday                            2199  22175
Sunday                              1936  21756
Thursday                            2082  22296
Tuesday                             2073  21888
Wednesday                           2103  22371
</pre>
</div>

<div id="outline-container-sec-1-20-1" class="outline-4">
<h4 id="sec-1-20-1"><span class="section-number-4">1.20.1</span> Answer</h4>
<div class="outline-text-4" id="text-1-20-1">
<p>
<b>Saturday</b>.
</p>
</div>
</div>
</div>

<div id="outline-container-sec-1-21" class="outline-3">
<h3 id="sec-1-21"><span class="section-number-3">1.21</span> Problem 4.5 - Popular Locations (1 point possible)</h3>
<div class="outline-text-3" id="text-1-21">
<p>
On which day of the week do the fewest motor vehicle thefts in
residential driveways happen?
</p>

<div class="org-src-container">

<pre class="src src-R">table(Top5$Weekday, Top5$LocationDescription)
</pre>
</div>

<pre class="example">
          ALLEY DRIVEWAY - RESIDENTIAL GAS STATION
Friday      385                    257         332
Monday      320                    255         280
Saturday    341                    202         338
Sunday      307                    221         336
Thursday    315                    263         282
Tuesday     323                    243         270
Wednesday   317                    234         273

          PARKING LOT/GARAGE(NON.RESID.) STREET
Friday                              2331  23773
Monday                              2128  22305
Saturday                            2199  22175
Sunday                              1936  21756
Thursday                            2082  22296
Tuesday                             2073  21888
Wednesday                           2103  22371
</pre>
</div>

<div id="outline-container-sec-1-21-1" class="outline-4">
<h4 id="sec-1-21-1"><span class="section-number-4">1.21.1</span> Answer</h4>
<div class="outline-text-4" id="text-1-21-1">
<p>
<b>Saturday</b>.
</p>
</div>
</div>
</div>
</div>

<div id="outline-container-sec-2" class="outline-2">
<h2 id="sec-2"><span class="section-number-2">2</span> Stock dynamics</h2>
<div class="outline-text-2" id="text-2">
<p>
A stock market is where buyers and sellers trade shares of a company,
and is one of the most popular ways for individuals and companies to
invest money. The size of the world stock market  is now estimated to
be in the trillions. The largest stock market in the world is the New
York Stock Exchange (NYSE), located in New York City. About 2,800
companies are listed on the NSYE. In this problem, we'll look at the
monthly stock prices of five of these companies: IBM, General Electric
(GE), Procter and Gamble, Coca Cola, and Boeing. The data used in this
problem comes from Infochimps.
</p>

<p>
Download and read the following files into R, using the read.csv
function: <a href="https://courses.edx.org/asset-v1:MITx+15.071x_2a+2T2015+type@asset+block/IBMStock.csv">IBMStock.csv</a>, <a href="https://courses.edx.org/asset-v1:MITx+15.071x_2a+2T2015+type@asset+block/GEStock.csv">GEStock.csv</a>, <a href="https://courses.edx.org/asset-v1:MITx+15.071x_2a+2T2015+type@asset+block/ProcterGambleStock.csv">ProcterGambleStock.csv</a>,
<a href="https://courses.edx.org/asset-v1:MITx+15.071x_2a+2T2015+type@asset+block/CocaColaStock.csv">CocaColaStock.csv</a>, and <a href="https://courses.edx.org/asset-v1:MITx+15.071x_2a+2T2015+type@asset+block/BoeingStock.csv">BoeingStock.csv</a>. (Do not open these files in
any spreadsheet software before completing this problem because it
might change the format of the Date field.)
</p>

<p>
Call the data frames "IBM", "GE", "ProcterGamble", "CocaCola", and
"Boeing", respectively. Each data frame has two variables, described
as follows:
</p>

<ul class="org-ul">
<li><b>Date</b>: the date of the stock price, always given as the first
of the month.
</li>
<li><b>StockPrice</b>: the average stock price of the company in the
given month.
</li>
</ul>

<p>
In this problem, we'll take a look at how the stock dynamics of these
companies have changed over time.
</p>
</div>

<div id="outline-container-sec-2-1" class="outline-3">
<h3 id="sec-2-1"><span class="section-number-3">2.1</span> Downloading and load the data</h3>
<div class="outline-text-3" id="text-2-1">
<p>
In this first part we will download and load each dataset in a
dataframe.
</p>
</div>

<div id="outline-container-sec-2-1-1" class="outline-4">
<h4 id="sec-2-1-1"><span class="section-number-4">2.1.1</span> Download the data sets</h4>
<div class="outline-text-4" id="text-2-1-1">
<p>
In this part we can download the data
</p>

<div class="org-src-container">

<pre class="src src-R">rm(list = ls())                         <span style="color: #9932cc;"># </span><span style="color: #ba55d3;">Remove all workspace data</span>
<span style="color: #db7093;">library</span>(parallel)

<span style="color: #4682b4;">if</span>(!file.exists(<span style="color: #fffacd;">"../data"</span>)) {
        dir.create(<span style="color: #fffacd;">"../data"</span>)
}

fileUrl <span style="color: #db7093;">&lt;-</span>
        c(<span style="color: #fffacd;">"https://courses.edx.org/asset-v1:MITx+15.071x_2a+2T2015+type@asset+block/IBMStock.csv"</span>, <span style="color: #fffacd;">"https://courses.edx.org/asset-v1:MITx+15.071x_2a+2T2015+type@asset+block/GEStock.csv"</span>, <span style="color: #fffacd;">"https://courses.edx.org/asset-v1:MITx+15.071x_2a+2T2015+type@asset+block/ProcterGambleStock.csv"</span>, <span style="color: #fffacd;">"https://courses.edx.org/asset-v1:MITx+15.071x_2a+2T2015+type@asset+block/CocaColaStock.csv"</span>, <span style="color: #fffacd;">"https://courses.edx.org/asset-v1:MITx+15.071x_2a+2T2015+type@asset+block/BoeingStock.csv"</span>)

fileName <span style="color: #db7093;">&lt;-</span> c(<span style="color: #fffacd;">"IBMStock.csv"</span>, <span style="color: #fffacd;">"GEStock.csv"</span>, <span style="color: #fffacd;">"ProcterGambleStock.csv"</span>, <span style="color: #fffacd;">"CocaColaStock.csv"</span>, <span style="color: #fffacd;">"BoeingStock.csv"</span>)

dataPath <span style="color: #db7093;">&lt;-</span> <span style="color: #fffacd;">"../data"</span>

<span style="color: #4682b4;">for</span>(i <span style="color: #4682b4;">in</span> 1:5) {
        filePath <span style="color: #db7093;">&lt;-</span> paste(dataPath, fileName[i], sep = <span style="color: #fffacd;">"/"</span>)

        <span style="color: #4682b4;">if</span>(!file.exists(filePath)) {
                download.file(fileUrl[i], destfile = filePath, method = <span style="color: #fffacd;">"curl"</span>)
                list.files(<span style="color: #fffacd;">"../data"</span>)
        }
}
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-2-1-2" class="outline-4">
<h4 id="sec-2-1-2"><span class="section-number-4">2.1.2</span> Load the data sets in their respective dataframe</h4>
<div class="outline-text-4" id="text-2-1-2">
<div class="org-src-container">

<pre class="src src-R">writeLines(<span style="color: #fffacd;">"    Loading data into their data frames."</span>)
IBM <span style="color: #db7093;">&lt;-</span> read.table(<span style="color: #fffacd;">"../data/IBMStock.csv"</span>, sep = <span style="color: #fffacd;">","</span>, header = <span style="color: #3cb371;">TRUE</span>)
GE <span style="color: #db7093;">&lt;-</span> read.table(<span style="color: #fffacd;">"../data/GEStock.csv"</span>, sep = <span style="color: #fffacd;">","</span>, header = <span style="color: #3cb371;">TRUE</span>)
ProcterGamble <span style="color: #db7093;">&lt;-</span> read.table(<span style="color: #fffacd;">"../data/ProcterGambleStock.csv"</span>, sep = <span style="color: #fffacd;">","</span>, header = <span style="color: #3cb371;">TRUE</span>)
CocaCola <span style="color: #db7093;">&lt;-</span> read.table(<span style="color: #fffacd;">"../data/CocaColaStock.csv"</span>, sep = <span style="color: #fffacd;">","</span>, header = <span style="color: #3cb371;">TRUE</span>)
Boeing <span style="color: #db7093;">&lt;-</span> read.table(<span style="color: #fffacd;">"../data/BoeingStock.csv"</span>, sep = <span style="color: #fffacd;">","</span>, header = <span style="color: #3cb371;">TRUE</span>)
</pre>
</div>

<pre class="example">
Loading data into their data frames.
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-2-2" class="outline-3">
<h3 id="sec-2-2"><span class="section-number-3">2.2</span> Problem 1.1 - Summary Statistics (1 point possible)</h3>
<div class="outline-text-3" id="text-2-2">
<p>
Before working with these data sets, we need to convert the dates into
a format that R can understand. Take a look at the structure of one of
the datasets using the str function. Right now, the date variable is
stored as a factor. We can convert this to a "Date" object in R by
using the following five commands (one for each data set):
</p>

<div class="org-src-container">

<pre class="src src-R">IBM$Date = as.Date(IBM$Date, <span style="color: #fffacd;">"%m/%d/%y"</span>)
GE$Date = as.Date(GE$Date, <span style="color: #fffacd;">"%m/%d/%y"</span>)
CocaCola$Date = as.Date(CocaCola$Date, <span style="color: #fffacd;">"%m/%d/%y"</span>)
ProcterGamble$Date = as.Date(ProcterGamble$Date, <span style="color: #fffacd;">"%m/%d/%y"</span>)
Boeing$Date = as.Date(Boeing$Date, <span style="color: #fffacd;">"%m/%d/%y"</span>)
</pre>
</div>

<p>
The first argument to the <b>as.Date</b> function is the variable we want to
convert, and the second argument is the format of the Date
variable. We can just overwrite the original Date variable values with
the output of this function. Now, answer the following questions using
the str and summary functions.
</p>

<p>
Our five datasets all have the same number of observations. How many
observations are there in each data set?
</p>

<div class="org-src-container">

<pre class="src src-R">writeLines(<span style="color: #fffacd;">"    Initial analysis of data frames"</span>)
dim(IBM)
str(IBM)

dim(GE)
str(GE)

dim(ProcterGamble)
str(ProcterGamble)

dim(CocaCola)
str(CocaCola)

dim(Boeing)
str(Boeing)
</pre>
</div>

<pre class="example">
    Initial analysis of data frames
[1] 480   2
'data.frame':	480 obs. of  2 variables:
 $ Date      : Date, format: "1970-01-01" "1970-02-01" ...
 $ StockPrice: num  360 347 327 320 270 ...
[1] 480   2
'data.frame':	480 obs. of  2 variables:
 $ Date      : Date, format: "1970-01-01" "1970-02-01" ...
 $ StockPrice: num  74.3 70 72.2 74.3 66.7 ...
[1] 480   2
'data.frame':	480 obs. of  2 variables:
 $ Date      : Date, format: "1970-01-01" "1970-02-01" ...
 $ StockPrice: num  111.9 111.5 108.5 106.3 73.3 ...
[1] 480   2
'data.frame':	480 obs. of  2 variables:
 $ Date      : Date, format: "1970-01-01" "1970-02-01" ...
 $ StockPrice: num  83.4 81.6 81.3 76.8 69.3 ...
[1] 480   2
'data.frame':	480 obs. of  2 variables:
 $ Date      : Date, format: "1970-01-01" "1970-02-01" ...
 $ StockPrice: num  27.9 22.4 23.1 21.6 18.9 ...
</pre>
</div>

<div id="outline-container-sec-2-2-1" class="outline-4">
<h4 id="sec-2-2-1"><span class="section-number-4">2.2.1</span> Answer</h4>
<div class="outline-text-4" id="text-2-2-1">
<p>
Using the str function, we can see that each data set has 480
observations. We have monthly data for 40 years, so there are 12*40 =
480 observations.
</p>

<p>
<b>480</b> observations.
</p>
</div>
</div>
</div>

<div id="outline-container-sec-2-3" class="outline-3">
<h3 id="sec-2-3"><span class="section-number-3">2.3</span> Problem 1.2 - Summary Statistics (1 point possible)</h3>
<div class="outline-text-3" id="text-2-3">
<p>
What is the earliest year in our datasets?
</p>

<div class="org-src-container">

<pre class="src src-R"><span style="color: #db7093;">library</span>(lubridate)
head(sort(year(IBM$Date)))
head(sort(year(GE$Date)))
head(sort(year(ProcterGamble$Date)))
head(sort(year(CocaCola$Date)))
head(sort(year(Boeing$Date)))

summary(IBM$Date)
summary(GE$Date)
summary(ProcterGamble$Date)
summary(CocaCola$Date)
summary(Boeing$Date)
</pre>
</div>

<pre class="example">
[1] 1970 1970 1970 1970 1970 1970
[1] 1970 1970 1970 1970 1970 1970
[1] 1970 1970 1970 1970 1970 1970
[1] 1970 1970 1970 1970 1970 1970
[1] 1970 1970 1970 1970 1970 1970
        Min.      1st Qu.       Median         Mean      3rd Qu.         Max.
"1970-01-01" "1979-12-24" "1989-12-16" "1989-12-15" "1999-12-08" "2009-12-01"
        Min.      1st Qu.       Median         Mean      3rd Qu.         Max.
"1970-01-01" "1979-12-24" "1989-12-16" "1989-12-15" "1999-12-08" "2009-12-01"
        Min.      1st Qu.       Median         Mean      3rd Qu.         Max.
"1970-01-01" "1979-12-24" "1989-12-16" "1989-12-15" "1999-12-08" "2009-12-01"
        Min.      1st Qu.       Median         Mean      3rd Qu.         Max.
"1970-01-01" "1979-12-24" "1989-12-16" "1989-12-15" "1999-12-08" "2009-12-01"
        Min.      1st Qu.       Median         Mean      3rd Qu.         Max.
"1970-01-01" "1979-12-24" "1989-12-16" "1989-12-15" "1999-12-08" "2009-12-01"
</pre>
</div>

<div id="outline-container-sec-2-3-1" class="outline-4">
<h4 id="sec-2-3-1"><span class="section-number-4">2.3.1</span> Answer</h4>
<div class="outline-text-4" id="text-2-3-1">
<p>
Using the summary function, the minimum value of the Date variable is
January 1, 1970 for any dataset.
</p>
</div>
</div>
</div>

<div id="outline-container-sec-2-4" class="outline-3">
<h3 id="sec-2-4"><span class="section-number-3">2.4</span> Problem 1.3 - Summary Statistics (1 point possible)</h3>
<div class="outline-text-3" id="text-2-4">
<p>
What is the latest year in our datasets?
</p>

<div class="org-src-container">

<pre class="src src-R">summary(IBM$Date)
summary(GE$Date)
summary(ProcterGamble$Date)
summary(CocaCola$Date)
summary(Boeing$Date)
</pre>
</div>

<pre class="example">
        Min.      1st Qu.       Median         Mean      3rd Qu.         Max.
"1970-01-01" "1979-12-24" "1989-12-16" "1989-12-15" "1999-12-08" "2009-12-01"
        Min.      1st Qu.       Median         Mean      3rd Qu.         Max.
"1970-01-01" "1979-12-24" "1989-12-16" "1989-12-15" "1999-12-08" "2009-12-01"
        Min.      1st Qu.       Median         Mean      3rd Qu.         Max.
"1970-01-01" "1979-12-24" "1989-12-16" "1989-12-15" "1999-12-08" "2009-12-01"
        Min.      1st Qu.       Median         Mean      3rd Qu.         Max.
"1970-01-01" "1979-12-24" "1989-12-16" "1989-12-15" "1999-12-08" "2009-12-01"
        Min.      1st Qu.       Median         Mean      3rd Qu.         Max.
"1970-01-01" "1979-12-24" "1989-12-16" "1989-12-15" "1999-12-08" "2009-12-01"
</pre>
</div>

<div id="outline-container-sec-2-4-1" class="outline-4">
<h4 id="sec-2-4-1"><span class="section-number-4">2.4.1</span> Answer</h4>
<div class="outline-text-4" id="text-2-4-1">
<p>
Using the summary function, the maximum value of the Date variable is
December 1, 2009 for any dataset.
</p>
</div>
</div>
</div>

<div id="outline-container-sec-2-5" class="outline-3">
<h3 id="sec-2-5"><span class="section-number-3">2.5</span> Problem 1.4 - Summary Statistics (1 point possible)</h3>
<div class="outline-text-3" id="text-2-5">
<p>
What is the mean stock price of IBM over this time period?
</p>

<div class="org-src-container">

<pre class="src src-R">names(IBM)

writeLines(<span style="color: #fffacd;">"The mean is:"</span>)
mean(IBM$StockPrice)
</pre>
</div>

<pre class="example">
[1] "Date"       "StockPrice" "Year"
The mean is:
[1] 144.375
</pre>
</div>

<div id="outline-container-sec-2-5-1" class="outline-4">
<h4 id="sec-2-5-1"><span class="section-number-4">2.5.1</span> Answer</h4>
<div class="outline-text-4" id="text-2-5-1">
<p>
By typing summary(IBM), we can see that the mean value of the IBM
StockPrice is <b>144.38</b>.
</p>
</div>
</div>
</div>

<div id="outline-container-sec-2-6" class="outline-3">
<h3 id="sec-2-6"><span class="section-number-3">2.6</span> Problem 1.5 - Summary Statistics (1 point possible)</h3>
<div class="outline-text-3" id="text-2-6">
<p>
What is the minimum stock price of General Electric (GE) over this
time period?
</p>

<div class="org-src-container">

<pre class="src src-R">summary(GE$StockPrice)
</pre>
</div>

<pre class="example">
 Min. 1st Qu.  Median    Mean 3rd Qu.    Max.
9.294  44.210  55.810  59.300  72.230 156.800
</pre>
</div>
</div>

<div id="outline-container-sec-2-7" class="outline-3">
<h3 id="sec-2-7"><span class="section-number-3">2.7</span> Problem 1.6 - Summary Statistics (1 point possible)</h3>
<div class="outline-text-3" id="text-2-7">
<p>
What is the maximum stock price of Coca-Cola over this time period?
</p>

<div class="org-src-container">

<pre class="src src-R">summary(CocaCola$StockPrice)
</pre>
</div>

<pre class="example">
 Min. 1st Qu.  Median    Mean 3rd Qu.    Max.
30.06   42.76   51.44   60.03   69.62  146.60
</pre>
</div>

<div id="outline-container-sec-2-7-1" class="outline-4">
<h4 id="sec-2-7-1"><span class="section-number-4">2.7.1</span> Answer</h4>
<div class="outline-text-4" id="text-2-7-1">
<p>
By typing summary(CocaCola), we can see that the maximum value of the
Coca-Cola StockPrice is <b>146.58</b>.
</p>
</div>
</div>
</div>

<div id="outline-container-sec-2-8" class="outline-3">
<h3 id="sec-2-8"><span class="section-number-3">2.8</span> Problem 1.7 - Summary Statistics (1 point possible)</h3>
<div class="outline-text-3" id="text-2-8">
<p>
What is the median stock price of Boeing over this time period?
</p>

<div class="org-src-container">

<pre class="src src-R">summary(Boeing$StockPrice)
</pre>
</div>

<pre class="example">
 Min. 1st Qu.  Median    Mean 3rd Qu.    Max.
12.74   34.64   44.88   46.59   57.21  107.30
</pre>
</div>

<div id="outline-container-sec-2-8-1" class="outline-4">
<h4 id="sec-2-8-1"><span class="section-number-4">2.8.1</span> Answer</h4>
<div class="outline-text-4" id="text-2-8-1">
<p>
By typing summary(Boeing), we can see that the median value of the
Boeing StockPrice is <b>44.88</b>.
</p>
</div>
</div>
</div>

<div id="outline-container-sec-2-9" class="outline-3">
<h3 id="sec-2-9"><span class="section-number-3">2.9</span> Problem 1.8 - Summary Statistics (1 point possible)</h3>
<div class="outline-text-3" id="text-2-9">
<p>
What is the standard deviation of the stock price of Procter&amp;Gamble
over this time period?
</p>

<div class="org-src-container">

<pre class="src src-R">sd(ProcterGamble$StockPrice)
</pre>
</div>

<pre class="example">
[1] 18.19414
</pre>
</div>

<div id="outline-container-sec-2-9-1" class="outline-4">
<h4 id="sec-2-9-1"><span class="section-number-4">2.9.1</span> Answer</h4>
<div class="outline-text-4" id="text-2-9-1">
<p>
By typing sd(ProcterGamble$StockPrice), we can see that the standard
deviation of the Procter&amp;Gamble <b>StockPrice</b> is <b>18.19414</b>.
</p>
</div>
</div>
</div>

<div id="outline-container-sec-2-10" class="outline-3">
<h3 id="sec-2-10"><span class="section-number-3">2.10</span> Problem 2.1 - Visualizing Stock Dynamics (2 points possible)</h3>
<div class="outline-text-3" id="text-2-10">
<p>
Let's plot the stock prices to see if we can visualize trends in stock
prices during this time period. Using the plot function, plot the Date
on the x-axis and the StockPrice on the y-axis, for Coca-Cola.
</p>

<p>
This plots our observations as points, but we would really like to see
a line instead, since this is a continuous time period. To do this,
add the argument type="l" to your plot command, and re-generate the
plot (the character is quotes is the letter l, for line). You should
now see a line plot of the Coca-Cola stock price.
</p>


<div class="figure">
<p><img src="../graphs/CocacolaTrends.png" alt="CocacolaTrends.png" />
</p>
</div>

<p>
Around what year did Coca-Cola has its highest stock price in this
time period?
</p>
</div>

<div id="outline-container-sec-2-10-1" class="outline-4">
<h4 id="sec-2-10-1"><span class="section-number-4">2.10.1</span> Answer</h4>
<div class="outline-text-4" id="text-2-10-1">
<p>
You can generate the plot using the command plot(CocaCola$Date,
CocaCola$StockPrice, type="l"). Looking at the plot, the maximum value
of the StockPrice is around 1973, and the minimum value of the
StockPrice is around 1980.
</p>
</div>
</div>
</div>

<div id="outline-container-sec-2-11" class="outline-3">
<h3 id="sec-2-11"><span class="section-number-3">2.11</span> Problem 2.2 - Visualizing Stock Dynamics (1 point possible)</h3>
<div class="outline-text-3" id="text-2-11">
<p>
Now, let's add the line for Procter &amp; Gamble too. You can add a line
to a plot in R by using the lines function instead of the plot
function. Keeping the plot for Coca-Cola open, type in your R console:
</p>

<p>
Unfortunately, it's hard to tell which line is which. Let's fix this
by giving each line a color. First, re-run the plot command for
Coca-Cola, but add the argument col="red". You should see the plot for
Coca-Cola show up again, but this time in red. Now, let's add the
Procter &amp; Gamble line (using the lines function like we did before),
adding the argument col="blue". You should now see in your plot the
Coca-Cola stock price in red, and the Procter &amp; Gamble stock price in
blue.
</p>

<p>
As an alternative choice to changing the colors, you could instead
change the line type of the Procter &amp; Gamble line by adding the
argument lty=2. This will make the Procter &amp; Gamble line dashed.
</p>


<div class="figure">
<p><img src="../graphs/Cocacola-PGTrends.png" alt="Cocacola-PGTrends.png" />
</p>
</div>

<p>
Using this plot, answer the following questions.
</p>

<p>
In March of 2000, the technology bubble burst, and a stock market
crash occurred. According to this plot, which company's stock dropped
more?
</p>

<p>
To answer this question and the ones that follow, you may find it
useful to draw a vertical line at a certain date. To do this, type the
command
</p>

<p>
abline(v=as.Date(c("2000-03-01")), lwd=2)
</p>

<p>
in your R console, with the plot still open. This generates a vertical
line at the date March 1, 2000. The argument lwd=2 makes the line a
little thicker. You can change the date in this command to generate
the vertical line in different locations.
</p>
</div>

<div id="outline-container-sec-2-11-1" class="outline-4">
<h4 id="sec-2-11-1"><span class="section-number-4">2.11.1</span> Answer</h4>
<div class="outline-text-4" id="text-2-11-1">
<p>
You can generate the combined plot for Coca-Cola and Procter &amp; Gamble
by using the following commands in R:
</p>

<p>
Looking at the plot, around 2000 both stocks drop, but Procter and
Gamble's stock drops more.
</p>
</div>
</div>
</div>

<div id="outline-container-sec-2-12" class="outline-3">
<h3 id="sec-2-12"><span class="section-number-3">2.12</span> Problem 2.3 - Visualizing Stock Dynamics (2 points possible)</h3>
<div class="outline-text-3" id="text-2-12">
<p>
Answer these questions using the plot you generated in the previous
problem.
</p>


<div class="figure">
<p><img src="../graphs/Cocacola-PGTrends02.png" alt="Cocacola-PGTrends02.png" />
</p>
</div>
</div>


<div id="outline-container-sec-2-12-1" class="outline-4">
<h4 id="sec-2-12-1"><span class="section-number-4">2.12.1</span> Question a</h4>
<div class="outline-text-4" id="text-2-12-1">
<p>
Around 1983, the stock for one of these companies (Coca-Cola or
Procter and Gamble) was going up, while the other was going
down. Which one was going up?
</p>
</div>

<div id="outline-container-sec-2-12-1-1" class="outline-5">
<h5 id="sec-2-12-1-1"><span class="section-number-5">2.12.1.1</span> Answer</h5>
<div class="outline-text-5" id="text-2-12-1-1">
<p>
<b>Cocacola</b>. We can see that around 1983 the stock for Coca-Cola has an
upward trend.
</p>
</div>
</div>
</div>

<div id="outline-container-sec-2-12-2" class="outline-4">
<h4 id="sec-2-12-2"><span class="section-number-4">2.12.2</span> Question b</h4>
<div class="outline-text-4" id="text-2-12-2">
<p>
In the time period shown in the plot, which stock generally has lower
values?
</p>
</div>

<div id="outline-container-sec-2-12-2-1" class="outline-5">
<h5 id="sec-2-12-2-1"><span class="section-number-5">2.12.2.1</span> Answer</h5>
<div class="outline-text-5" id="text-2-12-2-1">
<p>
<b>Cocacola</b>. Looking at the plot, the red line (for Coca-Cola) is
 generally lower than the blue line.
</p>
</div>
</div>
</div>
</div>

<div id="outline-container-sec-2-13" class="outline-3">
<h3 id="sec-2-13"><span class="section-number-3">2.13</span> Problem 3.1 - Visualizing Stock Dynamics 1995-2005 (1 point possible)</h3>
<div class="outline-text-3" id="text-2-13">
<p>
Let's take a look at how the stock prices changed from 1995-2005 for
all five companies. In your R console, start by typing the following
plot command:
</p>

<p>
plot(CocaCola$Date[301:432], CocaCola$StockPrice[301:432], type="l",
col="red", ylim=c(0,210))
</p>

<p>
This will plot the CocaCola stock prices from 1995 through 2005, which
are the observations numbered from 301 to 432. The additional
argument, <b>ylim=c(0,210)</b>, makes the y-axis range from 0 to 210. This
will allow us to see all of the stock values when we add in the other
companies.
</p>

<p>
Now, use the lines function to add in the other four companies,
remembering to only plot the observations from 1995 to 2005, or
[301:432]. You don't need the "type" or "ylim" arguments for the lines
function, but remember to make each company a different color so that
you can tell them apart. Some color options are "red", "blue",
"green", "purple", "orange", and "black". To see all of the color
options in R, type colors() in your R console.
</p>

<p>
(If you prefer to change the type of the line instead of the color,
here are some options for changing the line type: lty=2 will make the
line dashed, lty=3 will make the line dotted, lty=4 will make the line
alternate between dashes and dots, and lty=5 will make the line
long-dashed.)
</p>


<div class="figure">
<p><img src="../graphs/CoTrends.png" alt="CoTrends.png" />
</p>
</div>

<p>
Use this plot to answer the following four questions.
</p>
</div>

<div id="outline-container-sec-2-13-1" class="outline-4">
<h4 id="sec-2-13-1"><span class="section-number-4">2.13.1</span> Question 1</h4>
<div class="outline-text-4" id="text-2-13-1">
<p>
Which stock fell the most right after the technology bubble burst in
March 2000?
</p>
</div>

<div id="outline-container-sec-2-13-1-1" class="outline-5">
<h5 id="sec-2-13-1-1"><span class="section-number-5">2.13.1.1</span> Answer</h5>
<div class="outline-text-5" id="text-2-13-1-1">
<p>
<b>GE</b>. By looking at this plot, you can see that the stock for General
 Electric falls significantly more than the other stocks after the
 technology bubble burst.
</p>
</div>
</div>
</div>
</div>

<div id="outline-container-sec-2-14" class="outline-3">
<h3 id="sec-2-14"><span class="section-number-3">2.14</span> Problem 3.2 - Visualizing Stock Dynamics 1995-2005 (1 point possible)</h3>
<div class="outline-text-3" id="text-2-14">
<p>
Which stock reaches the highest value in the time period 1995-2005?
</p>
</div>

<div id="outline-container-sec-2-14-1" class="outline-4">
<h4 id="sec-2-14-1"><span class="section-number-4">2.14.1</span> Answer</h4>
<div class="outline-text-4" id="text-2-14-1">
<p>
<b>IBM</b>. Looking at the plot (see the previous explanation for how to
 create the plot), you can see that IBM has the highest value,
 around 1999.
</p>
</div>
</div>
</div>

<div id="outline-container-sec-2-15" class="outline-3">
<h3 id="sec-2-15"><span class="section-number-3">2.15</span> Problem 3.3 - Visualizing Stock Dynamics 1995-2005 (1 point possible)</h3>
<div class="outline-text-3" id="text-2-15">

<div class="figure">
<p><img src="../graphs/CoTrends1997.png" alt="CoTrends1997.png" />
</p>
</div>

<p>
In October of 1997, there was a global stock market crash that was
caused by an economic crisis in Asia. Comparing September 1997 to
November 1997, which companies saw a decreasing trend in their stock
price? (Select all that apply.)
</p>
</div>

<div id="outline-container-sec-2-15-1" class="outline-4">
<h4 id="sec-2-15-1"><span class="section-number-4">2.15.1</span> Answer</h4>
<div class="outline-text-4" id="text-2-15-1">
<p>
Looking at the plot, two companies had a decreasing trend in stock
prices from September 1997 to November 1997: Boeing and Procter &amp;
Gamble.
</p>
</div>
</div>
</div>

<div id="outline-container-sec-2-16" class="outline-3">
<h3 id="sec-2-16"><span class="section-number-3">2.16</span> Problem 3.4 - Visualizing Stock Dynamics 1995-2005 (1 point possible)</h3>
<div class="outline-text-3" id="text-2-16">

<div class="figure">
<p><img src="../graphs/CoTrends2004-2005.png" alt="CoTrends2004-2005.png" />
</p>
</div>

<p>
In the last two years of this time period (2004 and 2005) which stock
seems to be performing the best, in terms of increasing stock price?
</p>
</div>

<div id="outline-container-sec-2-16-1" class="outline-4">
<h4 id="sec-2-16-1"><span class="section-number-4">2.16.1</span> Answer</h4>
<div class="outline-text-4" id="text-2-16-1">
<p>
Looking at the plot, you can see that Boeing is steadily increasing
from 2004 to the beginning of 2006.
</p>
</div>
</div>
</div>

<div id="outline-container-sec-2-17" class="outline-3">
<h3 id="sec-2-17"><span class="section-number-3">2.17</span> Problem 4.1 - Monthly Trends (1 point possible)</h3>
<div class="outline-text-3" id="text-2-17">
<p>
Lastly, let's see if stocks tend to be higher or lower during certain
months. Use the tapply command to calculate the mean stock price of
IBM, sorted by months. To sort by months, use
</p>

<p>
months(IBM$Date)
</p>

<p>
as the second argument of the tapply function.
</p>

<p>
For IBM, compare the monthly averages to the overall average stock
price. In which months has IBM historically had a higher stock price
(on average)? Select all that apply.
</p>

<div class="org-src-container">

<pre class="src src-R">names(IBM)

print(<span style="color: #fffacd;">"The over mean of the IBM stock price is:"</span>)
mean(IBM$StockPrice)
print(<span style="color: #fffacd;">"Mean stock price of IBM by month:"</span>)
tapply(IBM$StockPrice, months(IBM$Date), mean)
</pre>
</div>

<pre class="example">
[1] "Date"       "StockPrice"
[1] "The over mean of the IBI stock price is:"
[1] 144.375
[1] "Mean stock price of IBM by month:"
    April    August  December  February   January      July      June     March
 152.1168  140.1455  140.7593  152.6940  150.2384  139.0670  139.0907  152.4327
      May  November   October September
 151.5022  138.0187  137.3466  139.0885
</pre>
</div>

<div id="outline-container-sec-2-17-1" class="outline-4">
<h4 id="sec-2-17-1"><span class="section-number-4">2.17.1</span> Answer</h4>
<div class="outline-text-4" id="text-2-17-1">
<p>
The overall average stock price for IBM is 144.375, which can be
computed using the command mean(IBM$StockPrice). Comparing the monthly
averages to this, using the command tapply(IBM$StockPrice,
months(IBM$Date), mean), we can see that the price has historically
been higher than average January - May, and lower than average during
the remaining months.
</p>
</div>
</div>
</div>

<div id="outline-container-sec-2-18" class="outline-3">
<h3 id="sec-2-18"><span class="section-number-3">2.18</span> Problem 4.2 - Monthly Trends (1 point possible)</h3>
<div class="outline-text-3" id="text-2-18">
<p>
Repeat the tapply function from the previous problem for each of the
other four companies, and use the output to answer the remaining
questions.
</p>

<p>
General Electric and Coca-Cola both have their highest average stock
price in the same month. Which month is this?
</p>

<div class="org-src-container">

<pre class="src src-R">names(GE); names(CocaCola)

writeLines(<span style="color: #fffacd;">"\nThe over mean of the GE stock price is:"</span>)
mean(GE$StockPrice)

writeLines(<span style="color: #fffacd;">"\nThe over mean of the Coca-Cola stock price is:"</span>)
mean(CocaCola$StockPrice)

writeLines(<span style="color: #fffacd;">"\nMean stock price of GE by month:"</span>)
tapply(GE$StockPrice, months(GE$Date), mean)

writeLines(<span style="color: #fffacd;">"\nMean stock price of Coca-Cola  by month:"</span>)
tapply(CocaCola$StockPrice, months(CocaCola$Date), mean)
</pre>
</div>

<pre class="example">
[1] "Date"       "StockPrice"
[1] "Date"       "StockPrice"

The over mean of the GE stock price is:
[1] 59.3035

The over mean of the Coca-Cola stock price is:
[1] 60.02973

Mean stock price of GE by month:
    April    August  December  February   January      July      June     March
 64.48009  56.50315  59.10217  62.52080  62.04511  56.73349  56.46844  63.15055
      May  November   October September
 60.87135  57.28879  56.23897  56.23913

Mean stock price of Coca-Cola  by month:
    April    August  December  February   January      July      June     March
 62.68888  58.88014  59.73223  60.73475  60.36849  58.98346  60.81208  62.07135
      May  November   October September
 61.44358  59.10268  57.93887  57.60024
</pre>
</div>

<div id="outline-container-sec-2-18-1" class="outline-4">
<h4 id="sec-2-18-1"><span class="section-number-4">2.18.1</span> Answer</h4>
<div class="outline-text-4" id="text-2-18-1">
<p>
General Electric has an average stock price of 64.48 in <b>April</b>, which
is higher than any other month. Coca-Cola has an average stock price
of 62.69 in April, which is higher than any other month.
</p>
</div>
</div>
</div>

<div id="outline-container-sec-2-19" class="outline-3">
<h3 id="sec-2-19"><span class="section-number-3">2.19</span> Problem 4.3 - Monthly Trends (1 point possible)</h3>
<div class="outline-text-3" id="text-2-19">
<div class="org-src-container">

<pre class="src src-R">writeLines(<span style="color: #fffacd;">"\nThe over mean of the Boeing stock price is:"</span>)
mean(Boeing$StockPrice)

writeLines(<span style="color: #fffacd;">"\nThe over mean of the Coca-Cola stock price is:"</span>)
mean(CocaCola$StockPrice)

writeLines(<span style="color: #fffacd;">"\nThe over mean of the GE stock price is:"</span>)
mean(GE$StockPrice)

writeLines(<span style="color: #fffacd;">"\nThe over mean of the IBM stock price is:"</span>)
mean(IBM$StockPrice)

writeLines(<span style="color: #fffacd;">"\nThe over mean of the Procter&amp;Gamble stock price is:"</span>)
mean(ProcterGamble$StockPrice)

writeLines(<span style="color: #fffacd;">"\n---------\n"</span>)

writeLines(<span style="color: #fffacd;">"\nMean stock price of Boeing  by month:"</span>)
tapply(Boeing$StockPrice, months(Boeing$Date), mean)

writeLines(<span style="color: #fffacd;">"\nMean stock price of Coca-Cola  by month:"</span>)
tapply(CocaCola$StockPrice, months(CocaCola$Date), mean)

writeLines(<span style="color: #fffacd;">"\nMean stock price of GE by month:"</span>)
tapply(GE$StockPrice, months(GE$Date), mean)

writeLines(<span style="color: #fffacd;">"\nMean stock price of IBM  by month:"</span>)
tapply(IBM$StockPrice, months(IBM$Date), mean)

writeLines(<span style="color: #fffacd;">"\nMean stock price of ProcterGamble  by month:"</span>)
tapply(ProcterGamble$StockPrice, months(ProcterGamble$Date), mean)
</pre>
</div>

<pre class="example">
The over mean of the Boeing stock price is:
[1] 46.59293

The over mean of the Coca-Cola stock price is:
[1] 60.02973

The over mean of the GE stock price is:
[1] 59.3035

The over mean of the IBM stock price is:
[1] 144.375

The over mean of the Procter&amp;Gamble stock price is:
[1] 77.70452

---------

Mean stock price of Boeing  by month:
    April    August  December  February   January      July      June     March
 47.04686  46.86311  46.17315  46.89223  46.51097  46.55360  47.38525  46.88208
      May  November   October September
 48.13716  45.14990  45.21603  46.30485

Mean stock price of Coca-Cola  by month:
    April    August  December  February   January      July      June     March
 62.68888  58.88014  59.73223  60.73475  60.36849  58.98346  60.81208  62.07135
      May  November   October September
 61.44358  59.10268  57.93887  57.60024

Mean stock price of GE by month:
    April    August  December  February   January      July      June     March
 64.48009  56.50315  59.10217  62.52080  62.04511  56.73349  56.46844  63.15055
      May  November   October September
 60.87135  57.28879  56.23897  56.23913

Mean stock price of IBM  by month:
    April    August  December  February   January      July      June     March
 152.1168  140.1455  140.7593  152.6940  150.2384  139.0670  139.0907  152.4327
      May  November   October September
 151.5022  138.0187  137.3466  139.0885

Mean stock price of ProcterGamble  by month:
    April    August  December  February   January      July      June     March
 77.68671  76.82266  78.29661  79.02575  79.61798  76.64556  77.39275  77.34761
      May  November   October September
 77.85958  78.45610  76.67903  76.62385
</pre>

<p>
For the months of December and January, every company's average stock
is higher in one month and lower in the other. In which month are the
stock prices lower?
</p>
</div>

<div id="outline-container-sec-2-19-1" class="outline-4">
<h4 id="sec-2-19-1"><span class="section-number-4">2.19.1</span> Answer</h4>
<div class="outline-text-4" id="text-2-19-1">
<p>
<b>Having lower stock prices in December is a trend that holds for all
five companies</b>.
</p>
</div>
</div>
</div>

<div id="outline-container-sec-2-20" class="outline-3">
<h3 id="sec-2-20"><span class="section-number-3">2.20</span> Ready to buy!</h3>
<div class="outline-text-3" id="text-2-20">
<p>
After seeing these trends, we are ready to buy stock in certain months
and sell it in others! But, we should be careful, because one really
good or really bad year could skew the average to show a trend that is
not really there in general.
</p>
</div>
</div>
</div>
<div id="footnotes">
<h2 class="footnotes">Footnotes: </h2>
<div id="text-footnotes">

<div class="footdef"><sup><a id="fn.1" name="fn.1" class="footnum" href="#fnr.1">1</a></sup> <p>DEFINITION NOT FOUND.</p></div>


</div>
</div></div>
<div id="postamble" class="status">
<p class="date">Date: 07/06/2015</p>
<p class="author">Author: Sergio-Feliciano Mendoza-Barrera</p>
<p class="date">Created: 2015-06-07 Sun 08:50</p>
<p class="creator"><a href="http://www.gnu.org/software/emacs/">Emacs</a> 24.5.1 (<a href="http://orgmode.org">Org</a> mode 8.2.10)</p>
<p class="validation"><a href="http://validator.w3.org/check?uri=referer">Validate</a></p>
</div>
</body>
</html>
